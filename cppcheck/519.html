
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [project name]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [project name]: /Users/MilleniumStudio/Git/wod/src/server/scripts/Examples/example_spell.cpp </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> example_spell.cpp</p>
<a href='519.html#line-31'> noConstructor 31</a><a href='519.html#line-333'> unusedFunction 333</a><a href='519.html#line-414'> unusedFunction 414</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-2"></a><span class="c1">//</span>
<a name="line-3"></a><span class="c1">//  MILLENIUM-STUDIO</span>
<a name="line-4"></a><span class="c1">//  Copyright 2016 Millenium-studio SARL</span>
<a name="line-5"></a><span class="c1">//  All Rights Reserved.</span>
<a name="line-6"></a><span class="c1">//</span>
<a name="line-7"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-8"></a>
<a name="line-9"></a><span class="cm">/*</span>
<a name="line-10"></a><span class="cm"> * An example of a spell script file</span>
<a name="line-11"></a><span class="cm"> * to bind a script to spell you have to add entry for it in `spell_script_names`</span>
<a name="line-12"></a><span class="cm"> * where `spell_id` is id of the spell to bind</span>
<a name="line-13"></a><span class="cm"> * and `ScriptName` is the name of a script assigned on registration</span>
<a name="line-14"></a><span class="cm"> */</span>
<a name="line-15"></a>
<a name="line-16"></a><span class="cp">#include</span> <span class="cpf">&quot;ScriptMgr.h&quot;</span><span class="cp"></span>
<a name="line-17"></a><span class="cp">#include</span> <span class="cpf">&quot;SpellAuras.h&quot;</span><span class="cp"></span>
<a name="line-18"></a><span class="cp">#include</span> <span class="cpf">&quot;SpellAuraEffects.h&quot;</span><span class="cp"></span>
<a name="line-19"></a><span class="cp">#include</span> <span class="cpf">&quot;SpellScript.h&quot;</span><span class="cp"></span>
<a name="line-20"></a>
<a name="line-21"></a><span class="k">enum</span> <span class="n">Spells</span>
<a name="line-22"></a><span class="p">{</span>
<a name="line-23"></a>    <span class="n">SPELL_TRIGGERED</span> <span class="o">=</span> <span class="mi">18282</span>
<a name="line-24"></a><span class="p">};</span>
<a name="line-25"></a>
<a name="line-26"></a><span class="k">class</span> <span class="nc">spell_ex_5581</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-27"></a><span class="p">{</span>
<a name="line-28"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-29"></a>        <span class="n">spell_ex_5581</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex_5581&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-30"></a>
<a name="line-31"></a><span class="hll">        <span class="k">class</span> <span class="nc">spell_ex_5581SpellScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScript</span><div class='verbose expandable'><span class='error2'>&lt;--- The class 'spell_ex_5581SpellScript' does not have a constructor. <span class='marker'>[+]</span></span><div class='content'>The class &apos;spell_ex_5581SpellScript&apos; does not have a constructor although it has private member variables. Member variables of builtin types are left uninitialized when the class is instantiated. That may cause bugs or undefined behavior.</div></div>
</span><a name="line-32"></a>        <span class="p">{</span>
<a name="line-33"></a>            <span class="c1">// initialize script, this macro does compile time check for type of the function - prevents possible issues</span>
<a name="line-34"></a>            <span class="c1">// if you have assigned wrong type of function to a hook you&#39;ll receive type conversion error during build</span>
<a name="line-35"></a>            <span class="c1">// this line is required, otherwise you&#39;ll get XXXHandlerFunction - identifier not found errors</span>
<a name="line-36"></a>            <span class="n">PrepareSpellScript</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="p">);</span>
<a name="line-37"></a>
<a name="line-38"></a>            <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">localVariable</span><span class="p">;</span>
<a name="line-39"></a>            <span class="kt">char</span><span class="o">*</span> <span class="n">localVariable2</span><span class="p">;</span>
<a name="line-40"></a>
<a name="line-41"></a>            <span class="c1">// function called on server startup</span>
<a name="line-42"></a>            <span class="c1">// checks if script has data required for it to work</span>
<a name="line-43"></a>            <span class="kt">bool</span> <span class="nf">Validate</span><span class="p">(</span><span class="n">SpellInfo</span> <span class="k">const</span><span class="o">*</span> <span class="n">spellEntry</span><span class="err">*/</span><span class="p">)</span>
<a name="line-44"></a>            <span class="p">{</span>
<a name="line-45"></a>                <span class="c1">// check if spellid 70522 exists in dbc, we will trigger it later</span>
<a name="line-46"></a>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">sSpellMgr</span><span class="o">-&gt;</span><span class="n">GetSpellInfo</span><span class="p">(</span><span class="n">SPELL_TRIGGERED</span><span class="p">))</span>
<a name="line-47"></a>                    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-48"></a>                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-49"></a>            <span class="p">}</span>
<a name="line-50"></a>
<a name="line-51"></a>            <span class="c1">// function called just after script is added to spell</span>
<a name="line-52"></a>            <span class="c1">// we initialize local variables if needed</span>
<a name="line-53"></a>            <span class="kt">bool</span> <span class="nf">Load</span><span class="p">()</span>
<a name="line-54"></a>            <span class="p">{</span>
<a name="line-55"></a>                <span class="n">localVariable</span> <span class="o">=</span> <span class="s">&quot;we&#39;re using local variable&quot;</span><span class="p">;</span>
<a name="line-56"></a>                <span class="n">localVariable2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">();</span>
<a name="line-57"></a>                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-58"></a>                <span class="c1">// return false - script will be immediately removed from the spell</span>
<a name="line-59"></a>                <span class="c1">// for example - we don&#39;t want this script to be executed on a creature</span>
<a name="line-60"></a>                <span class="c1">// if (GetCaster()-&gt;GetTypeID() != TYPEID_PLAYER)</span>
<a name="line-61"></a>                <span class="c1">//     return false;</span>
<a name="line-62"></a>            <span class="p">}</span>
<a name="line-63"></a>
<a name="line-64"></a>            <span class="c1">// function called just before script delete</span>
<a name="line-65"></a>            <span class="c1">// we free allocated memory</span>
<a name="line-66"></a>            <span class="kt">void</span> <span class="nf">Unload</span><span class="p">()</span>
<a name="line-67"></a>            <span class="p">{</span>
<a name="line-68"></a>                <span class="k">delete</span> <span class="n">localVariable2</span><span class="p">;</span>
<a name="line-69"></a>            <span class="p">}</span>
<a name="line-70"></a>
<a name="line-71"></a>            <span class="kt">void</span> <span class="nf">HandleBeforeCast</span><span class="p">()</span>
<a name="line-72"></a>            <span class="p">{</span>
<a name="line-73"></a>                <span class="c1">// this hook is executed before anything about casting the spell is done</span>
<a name="line-74"></a>                <span class="c1">// after this hook is executed all the machinery starts</span>
<a name="line-75"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Caster just finished preparing the spell (cast bar has expired)&quot;</span><span class="p">);</span>
<a name="line-76"></a>            <span class="p">}</span>
<a name="line-77"></a>
<a name="line-78"></a>            <span class="kt">void</span> <span class="nf">HandleOnCast</span><span class="p">()</span>
<a name="line-79"></a>            <span class="p">{</span>
<a name="line-80"></a>                <span class="c1">// cast is validated and spell targets are selected at this moment</span>
<a name="line-81"></a>                <span class="c1">// this is a last place when the spell can be safely interrupted</span>
<a name="line-82"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell is about to do take reagents, power, launch missile, do visuals and instant spell effects&quot;</span><span class="p">);</span>
<a name="line-83"></a>            <span class="p">}</span>
<a name="line-84"></a>
<a name="line-85"></a>            <span class="kt">void</span> <span class="nf">HandleAfterCast</span><span class="p">()</span>
<a name="line-86"></a>            <span class="p">{</span>
<a name="line-87"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;All immediate Actions for the spell are finished now&quot;</span><span class="p">);</span>
<a name="line-88"></a>                <span class="c1">// this is a safe for triggering additional effects for a spell without interfering</span>
<a name="line-89"></a>                <span class="c1">// with visuals or with other effects of the spell</span>
<a name="line-90"></a>                <span class="c1">//GetCaster()-&gt;CastSpell(target, SPELL_TRIGGERED, true);</span>
<a name="line-91"></a>            <span class="p">}</span>
<a name="line-92"></a>
<a name="line-93"></a>            <span class="n">SpellCastResult</span> <span class="nf">CheckRequirement</span><span class="p">()</span>
<a name="line-94"></a>            <span class="p">{</span>
<a name="line-95"></a>                <span class="c1">// in this hook you can add additional requirements for spell caster (and throw a client error if reqs&#39;re not passed)</span>
<a name="line-96"></a>                <span class="c1">// in this case we&#39;re disallowing to select non-player as a target of the spell</span>
<a name="line-97"></a>                <span class="c1">//if (!GetExplTargetUnit() || GetExplTargetUnit()-&gt;ToPlayer())</span>
<a name="line-98"></a>                    <span class="c1">//return SPELL_FAILED_BAD_TARGETS;</span>
<a name="line-99"></a>                <span class="k">return</span> <span class="n">SPELL_CAST_OK</span><span class="p">;</span>
<a name="line-100"></a>            <span class="p">}</span>
<a name="line-101"></a>
<a name="line-102"></a>
<a name="line-103"></a>            <span class="kt">void</span> <span class="nf">HandleDummyLaunch</span><span class="p">(</span><span class="n">SpellEffIndex</span> <span class="n">effIndex</span><span class="err">*/</span><span class="p">)</span>
<a name="line-104"></a>            <span class="p">{</span>
<a name="line-105"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell %u with SPELL_EFFECT_DUMMY is just launched!&quot;</span><span class="p">,</span> <span class="n">GetSpellInfo</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Id</span><span class="p">);</span>
<a name="line-106"></a>            <span class="p">}</span>
<a name="line-107"></a>
<a name="line-108"></a>            <span class="kt">void</span> <span class="nf">HandleDummyLaunchTarget</span><span class="p">(</span><span class="n">SpellEffIndex</span> <span class="n">effIndex</span><span class="err">*/</span><span class="p">)</span>
<a name="line-109"></a>            <span class="p">{</span>
<a name="line-110"></a>                <span class="n">uint64</span> <span class="n">targetGUID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-111"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">Unit</span><span class="o">*</span> <span class="n">unitTarget</span> <span class="o">=</span> <span class="n">GetHitUnit</span><span class="p">())</span>
<a name="line-112"></a>                    <span class="n">targetGUID</span> <span class="o">=</span> <span class="n">unitTarget</span><span class="o">-&gt;</span><span class="n">GetGUID</span><span class="p">();</span>
<a name="line-113"></a>                <span class="c1">// we&#39;re handling SPELL_EFFECT_DUMMY in effIndex 0 here</span>
<a name="line-114"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell %u with SPELL_EFFECT_DUMMY is just launched at it&#39;s target: &quot;</span> <span class="n">UI64FMTD</span> <span class="s">&quot;!&quot;</span><span class="p">,</span> <span class="n">GetSpellInfo</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Id</span><span class="p">,</span> <span class="n">targetGUID</span><span class="p">);</span>
<a name="line-115"></a>            <span class="p">}</span>
<a name="line-116"></a>
<a name="line-117"></a>            <span class="kt">void</span> <span class="nf">HandleDummyHit</span><span class="p">(</span><span class="n">SpellEffIndex</span> <span class="n">effIndex</span><span class="err">*/</span><span class="p">)</span>
<a name="line-118"></a>            <span class="p">{</span>
<a name="line-119"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell %u with SPELL_EFFECT_DUMMY has hit!&quot;</span><span class="p">,</span> <span class="n">GetSpellInfo</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Id</span><span class="p">);</span>
<a name="line-120"></a>            <span class="p">}</span>
<a name="line-121"></a>
<a name="line-122"></a>            <span class="kt">void</span> <span class="nf">HandleDummyHitTarget</span><span class="p">(</span><span class="n">SpellEffIndex</span> <span class="n">effIndex</span><span class="err">*/</span><span class="p">)</span>
<a name="line-123"></a>            <span class="p">{</span>
<a name="line-124"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;SPELL_EFFECT_DUMMY is hits it&#39;s target!&quot;</span><span class="p">);</span>
<a name="line-125"></a>                <span class="c1">// make caster cast a spell on a unit target of effect</span>
<a name="line-126"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">Unit</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="n">GetHitUnit</span><span class="p">())</span>
<a name="line-127"></a>                    <span class="n">GetCaster</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CastSpell</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">SPELL_TRIGGERED</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<a name="line-128"></a>            <span class="p">}</span>
<a name="line-129"></a>
<a name="line-130"></a>            <span class="kt">void</span> <span class="nf">HandleBeforeHit</span><span class="p">()</span>
<a name="line-131"></a>            <span class="p">{</span>
<a name="line-132"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell is about to hit target!&quot;</span><span class="p">);</span>
<a name="line-133"></a>            <span class="p">}</span>
<a name="line-134"></a>
<a name="line-135"></a>            <span class="kt">void</span> <span class="nf">HandleOnHit</span><span class="p">()</span>
<a name="line-136"></a>            <span class="p">{</span>
<a name="line-137"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell just hit target!&quot;</span><span class="p">);</span>
<a name="line-138"></a>            <span class="p">}</span>
<a name="line-139"></a>
<a name="line-140"></a>            <span class="kt">void</span> <span class="nf">HandleAfterHit</span><span class="p">()</span>
<a name="line-141"></a>            <span class="p">{</span>
<a name="line-142"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell just finished hitting target!&quot;</span><span class="p">);</span>
<a name="line-143"></a>            <span class="p">}</span>
<a name="line-144"></a>
<a name="line-145"></a>            <span class="kt">void</span> <span class="nf">FilterTargets</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">*&gt;&amp;</span> <span class="n">targetList</span><span class="err">*/</span><span class="p">)</span>
<a name="line-146"></a>            <span class="p">{</span>
<a name="line-147"></a>                <span class="c1">// usually you want this call for Area Target spells</span>
<a name="line-148"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Spell is about to add targets from targetList to final targets!&quot;</span><span class="p">);</span>
<a name="line-149"></a>            <span class="p">}</span>
<a name="line-150"></a>
<a name="line-151"></a>            <span class="c1">// register functions used in spell script - names of these functions do not matter</span>
<a name="line-152"></a>            <span class="kt">void</span> <span class="nf">Register</span><span class="p">()</span>
<a name="line-153"></a>            <span class="p">{</span>
<a name="line-154"></a>                <span class="c1">// we&#39;re registering our functions here</span>
<a name="line-155"></a>                <span class="n">BeforeCast</span> <span class="o">+=</span> <span class="n">SpellCastFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleBeforeCast</span><span class="p">);</span>
<a name="line-156"></a>                <span class="n">OnCast</span> <span class="o">+=</span> <span class="n">SpellCastFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleOnCast</span><span class="p">);</span>
<a name="line-157"></a>                <span class="n">AfterCast</span> <span class="o">+=</span> <span class="n">SpellCastFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleAfterCast</span><span class="p">);</span>
<a name="line-158"></a>                <span class="n">OnCheckCast</span> <span class="o">+=</span> <span class="n">SpellCheckCastFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">CheckRequirement</span><span class="p">);</span>
<a name="line-159"></a>                <span class="c1">// function HandleDummy will be called when spell is launched, independant from targets selected for spell, just before default effect 0 launch handler</span>
<a name="line-160"></a>                <span class="n">OnEffectLaunch</span> <span class="o">+=</span> <span class="n">SpellEffectFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleDummyLaunch</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_EFFECT_DUMMY</span><span class="p">);</span>
<a name="line-161"></a>                <span class="c1">// function HandleDummy will be called when spell is launched at target, just before default effect 0 launch at target handler</span>
<a name="line-162"></a>                <span class="n">OnEffectLaunchTarget</span> <span class="o">+=</span> <span class="n">SpellEffectFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleDummyLaunchTarget</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_EFFECT_DUMMY</span><span class="p">);</span>
<a name="line-163"></a>                <span class="c1">// function HandleDummy will be called when spell hits it&#39;s destination, independant from targets selected for spell, just before default effect 0 hit handler</span>
<a name="line-164"></a>                <span class="n">OnEffectHit</span> <span class="o">+=</span> <span class="n">SpellEffectFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleDummyHit</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_EFFECT_DUMMY</span><span class="p">);</span>
<a name="line-165"></a>                <span class="c1">// function HandleDummy will be called when unit is hit by spell, just before default effect 0 hit target handler</span>
<a name="line-166"></a>                <span class="n">OnEffectHitTarget</span> <span class="o">+=</span> <span class="n">SpellEffectFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleDummyHitTarget</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_EFFECT_DUMMY</span><span class="p">);</span>
<a name="line-167"></a>                <span class="c1">// this will prompt an error on startup because effect 0 of spell 49375 is set to SPELL_EFFECT_DUMMY, not SPELL_EFFECT_APPLY_AURA</span>
<a name="line-168"></a>                <span class="c1">//OnEffectHitTarget += SpellEffectFn(spell_gen_49375SpellScript::HandleDummy, EFFECT_0, SPELL_EFFECT_APPLY_AURA);</span>
<a name="line-169"></a>                <span class="c1">// this will make HandleDummy function to be called on first != 0 effect of spell 49375</span>
<a name="line-170"></a>                <span class="c1">//OnEffectHitTarget += SpellEffectFn(spell_gen_49375SpellScript::HandleDummy, EFFECT_FIRST_FOUND, SPELL_EFFECT_ANY);</span>
<a name="line-171"></a>                <span class="c1">// this will make HandleDummy function to be called on all != 0 effect of spell 49375</span>
<a name="line-172"></a>                <span class="c1">//OnEffectHitTarget += SpellEffectFn(spell_gen_49375SpellScript::HandleDummy, EFFECT_ALL, SPELL_EFFECT_ANY);</span>
<a name="line-173"></a>                <span class="c1">// bind handler to BeforeHit event of the spell</span>
<a name="line-174"></a>                <span class="n">BeforeHit</span> <span class="o">+=</span> <span class="n">SpellHitFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleBeforeHit</span><span class="p">);</span>
<a name="line-175"></a>                <span class="c1">// bind handler to OnHit event of the spell</span>
<a name="line-176"></a>                <span class="n">OnHit</span> <span class="o">+=</span> <span class="n">SpellHitFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleOnHit</span><span class="p">);</span>
<a name="line-177"></a>                <span class="c1">// bind handler to AfterHit event of the spell</span>
<a name="line-178"></a>                <span class="n">AfterHit</span> <span class="o">+=</span> <span class="n">SpellHitFn</span><span class="p">(</span><span class="n">spell_ex_5581SpellScript</span><span class="o">::</span><span class="n">HandleAfterHit</span><span class="p">);</span>
<a name="line-179"></a>                <span class="c1">// bind handler to OnUnitTargetSelect event of the spell</span>
<a name="line-180"></a>                <span class="c1">//OnUnitTargetSelect += SpellUnitTargetFn(spell_ex_5581SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_CASTER);</span>
<a name="line-181"></a>            <span class="p">}</span>
<a name="line-182"></a>        <span class="p">};</span>
<a name="line-183"></a>
<a name="line-184"></a>        <span class="c1">// function which creates SpellScript</span>
<a name="line-185"></a>        <span class="n">SpellScript</span><span class="o">*</span> <span class="nf">GetSpellScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-186"></a>        <span class="p">{</span>
<a name="line-187"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_5581SpellScript</span><span class="p">();</span>
<a name="line-188"></a>        <span class="p">}</span>
<a name="line-189"></a><span class="p">};</span>
<a name="line-190"></a>
<a name="line-191"></a><span class="k">class</span> <span class="nc">spell_ex_66244</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-192"></a><span class="p">{</span>
<a name="line-193"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-194"></a>        <span class="n">spell_ex_66244</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex_66244&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-195"></a>
<a name="line-196"></a>        <span class="k">class</span> <span class="nc">spell_ex_66244AuraScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AuraScript</span>
<a name="line-197"></a>        <span class="p">{</span>
<a name="line-198"></a>            <span class="n">PrepareAuraScript</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="p">);</span>
<a name="line-199"></a>            <span class="c1">// function called on server startup</span>
<a name="line-200"></a>            <span class="c1">// checks if script has data required for it to work</span>
<a name="line-201"></a>            <span class="kt">bool</span> <span class="nf">Validate</span><span class="p">(</span><span class="n">SpellInfo</span> <span class="k">const</span><span class="o">*</span> <span class="n">spellEntry</span><span class="err">*/</span><span class="p">)</span>
<a name="line-202"></a>            <span class="p">{</span>
<a name="line-203"></a>                <span class="c1">// check if spellid exists in dbc, we will trigger it later</span>
<a name="line-204"></a>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">sSpellMgr</span><span class="o">-&gt;</span><span class="n">GetSpellInfo</span><span class="p">(</span><span class="n">SPELL_TRIGGERED</span><span class="p">))</span>
<a name="line-205"></a>                    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-206"></a>                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-207"></a>            <span class="p">}</span>
<a name="line-208"></a>
<a name="line-209"></a>            <span class="c1">// function called in aura constructor</span>
<a name="line-210"></a>            <span class="c1">// we initialize local variables if needed</span>
<a name="line-211"></a>            <span class="kt">bool</span> <span class="nf">Load</span><span class="p">()</span>
<a name="line-212"></a>            <span class="p">{</span>
<a name="line-213"></a>                <span class="c1">// do not load script if aura is casted by player or caster not avalible</span>
<a name="line-214"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">Unit</span><span class="o">*</span> <span class="n">caster</span> <span class="o">=</span> <span class="n">GetCaster</span><span class="p">())</span>
<a name="line-215"></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">caster</span><span class="o">-&gt;</span><span class="n">GetTypeId</span><span class="p">()</span> <span class="o">==</span> <span class="n">TYPEID_PLAYER</span><span class="p">)</span>
<a name="line-216"></a>                        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-217"></a>                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-218"></a>            <span class="p">}</span>
<a name="line-219"></a>
<a name="line-220"></a>
<a name="line-221"></a>            <span class="kt">void</span> <span class="nf">HandleOnEffectApply</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">AuraEffectHandleModes</span> <span class="n">mode</span><span class="err">*/</span><span class="p">)</span>
<a name="line-222"></a>            <span class="p">{</span>
<a name="line-223"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Aura Effect is about to be applied on target!&quot;</span><span class="p">);</span>
<a name="line-224"></a>                <span class="c1">// this hook allows you to prevent execution of AuraEffect handler, or to replace it with your own handler</span>
<a name="line-225"></a>                <span class="c1">//PreventDefaultAction();</span>
<a name="line-226"></a>            <span class="p">}</span>
<a name="line-227"></a>            <span class="kt">void</span> <span class="nf">HandleOnEffectRemove</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">AuraEffectHandleModes</span> <span class="n">mode</span><span class="err">*/</span><span class="p">)</span>
<a name="line-228"></a>            <span class="p">{</span>
<a name="line-229"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Aura Effect is about to be removed from target!&quot;</span><span class="p">);</span>
<a name="line-230"></a>                <span class="c1">// this hook allows you to prevent execution of AuraEffect handler, or to replace it with your own handler</span>
<a name="line-231"></a>                <span class="c1">//PreventDefaultAction();</span>
<a name="line-232"></a>            <span class="p">}</span>
<a name="line-233"></a>
<a name="line-234"></a>            <span class="kt">void</span> <span class="nf">HandleAfterEffectApply</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">AuraEffectHandleModes</span> <span class="n">mode</span><span class="err">*/</span><span class="p">)</span>
<a name="line-235"></a>            <span class="p">{</span>
<a name="line-236"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Aura Effect has just been applied on target!&quot;</span><span class="p">);</span>
<a name="line-237"></a>                <span class="n">Unit</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="n">GetTarget</span><span class="p">();</span>
<a name="line-238"></a>                <span class="c1">// cast spell on target on aura apply</span>
<a name="line-239"></a>                <span class="n">target</span><span class="o">-&gt;</span><span class="n">CastSpell</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">SPELL_TRIGGERED</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<a name="line-240"></a>            <span class="p">}</span>
<a name="line-241"></a>
<a name="line-242"></a>            <span class="kt">void</span> <span class="nf">HandleAfterEffectRemove</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">AuraEffectHandleModes</span> <span class="n">mode</span><span class="err">*/</span><span class="p">)</span>
<a name="line-243"></a>            <span class="p">{</span>
<a name="line-244"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Aura Effect has just been just removed from target!&quot;</span><span class="p">);</span>
<a name="line-245"></a>                <span class="n">Unit</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="n">GetTarget</span><span class="p">();</span>
<a name="line-246"></a>                <span class="n">Unit</span><span class="o">*</span> <span class="n">caster</span> <span class="o">=</span> <span class="n">GetCaster</span><span class="p">();</span>
<a name="line-247"></a>                <span class="c1">// caster may be not avalible (logged out for example)</span>
<a name="line-248"></a>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">caster</span><span class="p">)</span>
<a name="line-249"></a>                    <span class="k">return</span><span class="p">;</span>
<a name="line-250"></a>                <span class="c1">// cast spell on caster on aura remove</span>
<a name="line-251"></a>                <span class="n">target</span><span class="o">-&gt;</span><span class="n">CastSpell</span><span class="p">(</span><span class="n">caster</span><span class="p">,</span> <span class="n">SPELL_TRIGGERED</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<a name="line-252"></a>            <span class="p">}</span>
<a name="line-253"></a>
<a name="line-254"></a>            <span class="kt">void</span> <span class="nf">HandleEffectPeriodic</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">)</span>
<a name="line-255"></a>            <span class="p">{</span>
<a name="line-256"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Perioidic Aura Effect is does a tick on target!&quot;</span><span class="p">);</span>
<a name="line-257"></a>                <span class="n">Unit</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="n">GetTarget</span><span class="p">();</span>
<a name="line-258"></a>                <span class="c1">// aura targets damage self on tick</span>
<a name="line-259"></a>                <span class="n">target</span><span class="o">-&gt;</span><span class="n">DealDamage</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<a name="line-260"></a>            <span class="p">}</span>
<a name="line-261"></a>
<a name="line-262"></a>            <span class="kt">void</span> <span class="nf">HandleEffectPeriodicUpdate</span><span class="p">(</span><span class="n">AuraEffectPtr</span> <span class="n">aurEff</span><span class="p">)</span>
<a name="line-263"></a>            <span class="p">{</span>
<a name="line-264"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Perioidic Aura Effect is now updated!&quot;</span><span class="p">);</span>
<a name="line-265"></a>                <span class="c1">// we&#39;re doubling aura amount every tick</span>
<a name="line-266"></a>                <span class="n">aurEff</span><span class="o">-&gt;</span><span class="n">ChangeAmount</span><span class="p">(</span><span class="n">aurEff</span><span class="o">-&gt;</span><span class="n">GetAmount</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
<a name="line-267"></a>            <span class="p">}</span>
<a name="line-268"></a>
<a name="line-269"></a>            <span class="kt">void</span> <span class="nf">HandleEffectCalcAmount</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">int32</span><span class="o">&amp;</span> <span class="n">amount</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&amp;</span> <span class="n">canBeRecalculated</span><span class="p">)</span>
<a name="line-270"></a>            <span class="p">{</span>
<a name="line-271"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Amount of Aura Effect is being calculated now!&quot;</span><span class="p">);</span>
<a name="line-272"></a>                <span class="c1">// we&#39;re setting amount to 100</span>
<a name="line-273"></a>                <span class="n">amount</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<a name="line-274"></a>                <span class="c1">// amount will be never recalculated due to applying passive aura</span>
<a name="line-275"></a>                <span class="n">canBeRecalculated</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-276"></a>            <span class="p">}</span>
<a name="line-277"></a>
<a name="line-278"></a>            <span class="kt">void</span> <span class="nf">HandleEffectCalcPeriodic</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&amp;</span> <span class="n">isPeriodic</span><span class="p">,</span> <span class="n">int32</span><span class="o">&amp;</span> <span class="n">amplitude</span><span class="p">)</span>
<a name="line-279"></a>            <span class="p">{</span>
<a name="line-280"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Periodic data of Aura Effect is being calculated now!&quot;</span><span class="p">);</span>
<a name="line-281"></a>                <span class="c1">// we&#39;re setting aura to be periodic and tick every 10 seconds</span>
<a name="line-282"></a>                <span class="n">isPeriodic</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-283"></a>                <span class="n">amplitude</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">IN_MILLISECONDS</span><span class="p">;</span>
<a name="line-284"></a>            <span class="p">}</span>
<a name="line-285"></a>
<a name="line-286"></a>            <span class="kt">void</span> <span class="nf">HandleEffectCalcSpellMod</span><span class="p">(</span><span class="n">constAuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">SpellModifier</span><span class="o">*&amp;</span> <span class="n">spellMod</span><span class="p">)</span>
<a name="line-287"></a>            <span class="p">{</span>
<a name="line-288"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;SpellMod data of Aura Effect is being calculated now!&quot;</span><span class="p">);</span>
<a name="line-289"></a>                <span class="c1">// we don&#39;t want spellmod for example</span>
<a name="line-290"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">spellMod</span><span class="p">)</span>
<a name="line-291"></a>                <span class="p">{</span>
<a name="line-292"></a>                    <span class="k">delete</span> <span class="n">spellMod</span><span class="p">;</span>
<a name="line-293"></a>                    <span class="n">spellMod</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<a name="line-294"></a>                <span class="p">}</span>
<a name="line-295"></a>
<a name="line-296"></a>                <span class="c1">// alternative: we want spellmod for spell which doesn&#39;t have it</span>
<a name="line-297"></a>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">spellMod</span><span class="p">)</span>
<a name="line-298"></a>                <span class="p">{</span>
<a name="line-299"></a>                    <span class="n">spellMod</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpellModifier</span><span class="p">(</span><span class="n">GetAura</span><span class="p">());</span>
<a name="line-300"></a>                    <span class="n">spellMod</span><span class="o">-&gt;</span><span class="n">op</span> <span class="o">=</span> <span class="n">SPELLMOD_DOT</span><span class="p">;</span>
<a name="line-301"></a>                    <span class="n">spellMod</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">SPELLMOD_PCT</span><span class="p">;</span>
<a name="line-302"></a>                    <span class="n">spellMod</span><span class="o">-&gt;</span><span class="n">spellId</span> <span class="o">=</span> <span class="n">GetId</span><span class="p">();</span>
<a name="line-303"></a>                    <span class="n">spellMod</span><span class="o">-&gt;</span><span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">;</span>
<a name="line-304"></a>                <span class="p">}</span>
<a name="line-305"></a>            <span class="p">}</span>
<a name="line-306"></a>
<a name="line-307"></a>            <span class="c1">// function registering</span>
<a name="line-308"></a>            <span class="kt">void</span> <span class="nf">Register</span><span class="p">()</span>
<a name="line-309"></a>            <span class="p">{</span>
<a name="line-310"></a>                <span class="n">OnEffectApply</span> <span class="o">+=</span> <span class="n">AuraEffectApplyFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleOnEffectApply</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">,</span> <span class="n">AURA_EFFECT_HANDLE_REAL</span><span class="p">);</span>
<a name="line-311"></a>                <span class="n">OnEffectRemove</span> <span class="o">+=</span> <span class="n">AuraEffectRemoveFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleOnEffectRemove</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">,</span> <span class="n">AURA_EFFECT_HANDLE_REAL</span><span class="p">);</span>
<a name="line-312"></a>                <span class="c1">// AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK - makes handler to be called when aura is reapplied on target</span>
<a name="line-313"></a>                <span class="n">AfterEffectApply</span> <span class="o">+=</span> <span class="n">AuraEffectApplyFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleAfterEffectApply</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">,</span> <span class="n">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</span><span class="p">);</span>
<a name="line-314"></a>                <span class="n">AfterEffectRemove</span> <span class="o">+=</span> <span class="n">AuraEffectRemoveFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleAfterEffectRemove</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">,</span> <span class="n">AURA_EFFECT_HANDLE_REAL</span><span class="p">);</span>
<a name="line-315"></a>                <span class="n">OnEffectPeriodic</span> <span class="o">+=</span> <span class="n">AuraEffectPeriodicFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleEffectPeriodic</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">);</span>
<a name="line-316"></a>                <span class="n">OnEffectUpdatePeriodic</span> <span class="o">+=</span> <span class="n">AuraEffectUpdatePeriodicFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleEffectPeriodicUpdate</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">);</span>
<a name="line-317"></a>                <span class="n">DoEffectCalcAmount</span> <span class="o">+=</span> <span class="n">AuraEffectCalcAmountFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleEffectCalcAmount</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">);</span>
<a name="line-318"></a>                <span class="n">DoEffectCalcPeriodic</span> <span class="o">+=</span> <span class="n">AuraEffectCalcPeriodicFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleEffectCalcPeriodic</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">);</span>
<a name="line-319"></a>                <span class="n">DoEffectCalcSpellMod</span> <span class="o">+=</span> <span class="n">AuraEffectCalcSpellModFn</span><span class="p">(</span><span class="n">spell_ex_66244AuraScript</span><span class="o">::</span><span class="n">HandleEffectCalcSpellMod</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">,</span> <span class="n">SPELL_AURA_DUMMY</span><span class="p">);</span>
<a name="line-320"></a>                <span class="n">OnApply</span> <span class="o">+=</span> <span class="n">AuraEffectApplyFn</span><span class="p">();</span>
<a name="line-321"></a>                <span class="n">OnRemove</span> <span class="o">+=</span> <span class="n">AuraEffectRemoveFn</span><span class="p">();</span>
<a name="line-322"></a>                <span class="n">DoCheckAreaTarget</span> <span class="o">+=</span> <span class="n">AuraCheckAreaTargetFn</span><span class="p">();</span><span class="err">*/</span>
<a name="line-323"></a>            <span class="p">}</span>
<a name="line-324"></a>
<a name="line-325"></a>            <span class="kt">void</span> <span class="nf">OnApply</span><span class="p">()</span>
<a name="line-326"></a>            <span class="p">{</span>
<a name="line-327"></a>            <span class="p">}</span>
<a name="line-328"></a>
<a name="line-329"></a>            <span class="kt">void</span> <span class="nf">OnRemove</span><span class="p">()</span>
<a name="line-330"></a>            <span class="p">{</span>
<a name="line-331"></a>            <span class="p">}</span>
<a name="line-332"></a>
<a name="line-333"></a><span class="hll">            <span class="kt">bool</span> <span class="nf">DoCheckAreaTarget</span><span class="p">(</span><span class="n">Unit</span><span class="o">*</span> <span class="n">proposedTarget</span><span class="p">)</span><span class='error2'>&lt;--- The function 'DoCheckAreaTarget' is never used.</span>
</span><a name="line-334"></a>            <span class="p">{</span>
<a name="line-335"></a>            <span class="p">}</span>
<a name="line-336"></a>        <span class="p">};</span>
<a name="line-337"></a>
<a name="line-338"></a>        <span class="c1">// function which creates AuraScript</span>
<a name="line-339"></a>        <span class="n">AuraScript</span><span class="o">*</span> <span class="nf">GetAuraScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-340"></a>        <span class="p">{</span>
<a name="line-341"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_66244AuraScript</span><span class="p">();</span>
<a name="line-342"></a>        <span class="p">}</span>
<a name="line-343"></a><span class="p">};</span>
<a name="line-344"></a>
<a name="line-345"></a><span class="c1">// example usage of OnEffectManaShield and AfterEffectManaShield hooks</span>
<a name="line-346"></a><span class="c1">// see spell_ex_absorb_aura, these hooks work the same as OnEffectAbsorb and AfterEffectAbsorb</span>
<a name="line-347"></a>
<a name="line-348"></a><span class="c1">// example usage of OnEffectAbsorb and AfterEffectAbsorb hooks</span>
<a name="line-349"></a><span class="k">class</span> <span class="nc">spell_ex_absorb_aura</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-350"></a><span class="p">{</span>
<a name="line-351"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-352"></a>        <span class="n">spell_ex_absorb_aura</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex_absorb_aura&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-353"></a>
<a name="line-354"></a>        <span class="k">class</span> <span class="nc">spell_ex_absorb_auraAuraScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AuraScript</span>
<a name="line-355"></a>        <span class="p">{</span>
<a name="line-356"></a>            <span class="n">PrepareAuraScript</span><span class="p">(</span><span class="n">spell_ex_absorb_auraAuraScript</span><span class="p">);</span>
<a name="line-357"></a>
<a name="line-358"></a>            <span class="kt">void</span> <span class="nf">HandleOnEffectAbsorb</span><span class="p">(</span><span class="n">AuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">DamageInfo</span> <span class="o">&amp;</span> <span class="n">dmgInfo</span><span class="p">,</span> <span class="n">uint32</span> <span class="o">&amp;</span> <span class="n">absorbAmount</span><span class="p">)</span>
<a name="line-359"></a>            <span class="p">{</span>
<a name="line-360"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Our aura is now absorbing damage done to us!&quot;</span><span class="p">);</span>
<a name="line-361"></a>                <span class="c1">// absorb whole damage done to us</span>
<a name="line-362"></a>                <span class="n">absorbAmount</span> <span class="o">=</span> <span class="n">dmgInfo</span><span class="p">.</span><span class="n">GetDamage</span><span class="p">();</span>
<a name="line-363"></a>            <span class="p">}</span>
<a name="line-364"></a>
<a name="line-365"></a>            <span class="kt">void</span> <span class="nf">HandleAfterEffectAbsorb</span><span class="p">(</span><span class="n">AuraEffectPtr</span> <span class="n">aurEff</span><span class="err">*/</span><span class="p">,</span> <span class="n">DamageInfo</span> <span class="o">&amp;</span> <span class="n">dmgInfo</span><span class="err">*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="o">&amp;</span> <span class="n">absorbAmount</span><span class="p">)</span>
<a name="line-366"></a>            <span class="p">{</span>
<a name="line-367"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Our aura has absorbed %u damage!&quot;</span><span class="p">,</span> <span class="n">absorbAmount</span><span class="p">);</span>
<a name="line-368"></a>            <span class="p">}</span>
<a name="line-369"></a>
<a name="line-370"></a>            <span class="c1">// function registering</span>
<a name="line-371"></a>            <span class="kt">void</span> <span class="nf">Register</span><span class="p">()</span>
<a name="line-372"></a>            <span class="p">{</span>
<a name="line-373"></a>                <span class="n">OnEffectAbsorb</span> <span class="o">+=</span> <span class="n">AuraEffectAbsorbFn</span><span class="p">(</span><span class="n">spell_ex_absorb_auraAuraScript</span><span class="o">::</span><span class="n">HandleOnEffectAbsorb</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">);</span>
<a name="line-374"></a>                <span class="n">AfterEffectAbsorb</span> <span class="o">+=</span> <span class="n">AuraEffectAbsorbFn</span><span class="p">(</span><span class="n">spell_ex_absorb_auraAuraScript</span><span class="o">::</span><span class="n">HandleAfterEffectAbsorb</span><span class="p">,</span> <span class="n">EFFECT_0</span><span class="p">);</span>
<a name="line-375"></a>            <span class="p">}</span>
<a name="line-376"></a>        <span class="p">};</span>
<a name="line-377"></a>
<a name="line-378"></a>        <span class="c1">// function which creates AuraScript</span>
<a name="line-379"></a>        <span class="n">AuraScript</span><span class="o">*</span> <span class="nf">GetAuraScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-380"></a>        <span class="p">{</span>
<a name="line-381"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_absorb_auraAuraScript</span><span class="p">();</span>
<a name="line-382"></a>        <span class="p">}</span>
<a name="line-383"></a><span class="p">};</span>
<a name="line-384"></a>
<a name="line-385"></a><span class="k">class</span> <span class="nc">spell_ex_463</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-386"></a><span class="p">{</span>
<a name="line-387"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-388"></a>        <span class="n">spell_ex_463</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex_463&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-389"></a>
<a name="line-390"></a>        <span class="k">class</span> <span class="nc">spell_ex_463AuraScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AuraScript</span>
<a name="line-391"></a>        <span class="p">{</span>
<a name="line-392"></a>            <span class="n">PrepareAuraScript</span><span class="p">(</span><span class="n">spell_ex_463AuraScript</span><span class="p">);</span>
<a name="line-393"></a>
<a name="line-394"></a>            <span class="kt">bool</span> <span class="nf">CheckAreaTarget</span><span class="p">(</span><span class="n">Unit</span><span class="o">*</span> <span class="n">target</span><span class="p">)</span>
<a name="line-395"></a>            <span class="p">{</span>
<a name="line-396"></a>                <span class="n">sLog</span><span class="o">-&gt;</span><span class="n">outInfo</span><span class="p">(</span><span class="n">LOG_FILTER_GENERAL</span><span class="p">,</span> <span class="s">&quot;Area aura checks if unit is a valid target for it!&quot;</span><span class="p">);</span>
<a name="line-397"></a>                <span class="c1">// in our script we allow only players to be affected</span>
<a name="line-398"></a>                <span class="k">return</span> <span class="n">target</span><span class="o">-&gt;</span><span class="n">GetTypeId</span><span class="p">()</span> <span class="o">==</span> <span class="n">TYPEID_PLAYER</span><span class="p">;</span>
<a name="line-399"></a>            <span class="p">}</span>
<a name="line-400"></a>            <span class="kt">void</span> <span class="nf">Register</span><span class="p">()</span>
<a name="line-401"></a>            <span class="p">{</span>
<a name="line-402"></a>                <span class="n">DoCheckAreaTarget</span> <span class="o">+=</span> <span class="n">AuraCheckAreaTargetFn</span><span class="p">(</span><span class="n">spell_ex_463AuraScript</span><span class="o">::</span><span class="n">CheckAreaTarget</span><span class="p">);</span>
<a name="line-403"></a>            <span class="p">}</span>
<a name="line-404"></a>        <span class="p">};</span>
<a name="line-405"></a>
<a name="line-406"></a>        <span class="c1">// function which creates AuraScript</span>
<a name="line-407"></a>        <span class="n">AuraScript</span><span class="o">*</span> <span class="nf">GetAuraScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-408"></a>        <span class="p">{</span>
<a name="line-409"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_463AuraScript</span><span class="p">();</span>
<a name="line-410"></a>        <span class="p">}</span>
<a name="line-411"></a><span class="p">};</span>
<a name="line-412"></a>
<a name="line-413"></a><span class="c1">// this function has to be added to function set in ScriptLoader.cpp</span>
<a name="line-414"></a><span class="hll"><span class="kt">void</span> <span class="nf">AddSC_example_spell_scripts</span><span class="p">()</span><span class='error2'>&lt;--- The function 'AddSC_example_spell_scripts' is never used.</span>
</span><a name="line-415"></a><span class="p">{</span>
<a name="line-416"></a>    <span class="k">new</span> <span class="n">spell_ex_5581</span><span class="p">;</span>
<a name="line-417"></a>    <span class="k">new</span> <span class="n">spell_ex_66244</span><span class="p">;</span>
<a name="line-418"></a>    <span class="k">new</span> <span class="n">spell_ex_absorb_aura</span><span class="p">;</span>
<a name="line-419"></a>    <span class="k">new</span> <span class="n">spell_ex_463</span><span class="p">;</span><span class="err">*/</span>
<a name="line-420"></a><span class="p">}</span>
<a name="line-421"></a>
<a name="line-422"></a><span class="c1">// empty script for copypasting</span>
<a name="line-423"></a><span class="k">class</span> <span class="nc">spell_ex</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-424"></a><span class="p">{</span>
<a name="line-425"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-426"></a>        <span class="n">spell_ex</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-427"></a>
<a name="line-428"></a>        <span class="k">class</span> <span class="nc">spell_ex_SpellScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScript</span>
<a name="line-429"></a>        <span class="p">{</span>
<a name="line-430"></a>            <span class="n">PrepareSpellScript</span><span class="p">(</span><span class="n">spell_ex_SpellScript</span><span class="p">);</span>
<a name="line-431"></a>
<a name="line-432"></a>            <span class="c1">//bool Validate(SpellInfo const* spellEntry){return true;}</span>
<a name="line-433"></a>            <span class="c1">//bool Load(){return true;}</span>
<a name="line-434"></a>            <span class="c1">//void Unload(){}</span>
<a name="line-435"></a>
<a name="line-436"></a>            <span class="c1">//void Function(SpellEffIndex effIndex) //OnEffect += SpellEffectFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_EFFECT_ANY);</span>
<a name="line-437"></a>            <span class="c1">//void Function() //OnHit += SpellEffectFn(spell_ex_SpellScript::Function);</span>
<a name="line-438"></a>            <span class="kt">void</span> <span class="nf">Register</span><span class="p">()</span>
<a name="line-439"></a>            <span class="p">{</span>
<a name="line-440"></a>            <span class="p">}</span>
<a name="line-441"></a>        <span class="p">};</span>
<a name="line-442"></a>
<a name="line-443"></a>        <span class="n">SpellScript</span><span class="o">*</span> <span class="nf">GetSpellScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-444"></a>        <span class="p">{</span>
<a name="line-445"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_SpellScript</span><span class="p">();</span>
<a name="line-446"></a>        <span class="p">}</span>
<a name="line-447"></a><span class="p">};</span>
<a name="line-448"></a>
<a name="line-449"></a><span class="c1">// empty script for copypasting</span>
<a name="line-450"></a><span class="k">class</span> <span class="nc">spell_ex</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SpellScriptLoader</span>
<a name="line-451"></a><span class="p">{</span>
<a name="line-452"></a>    <span class="k">public</span><span class="o">:</span>
<a name="line-453"></a>        <span class="n">spell_ex</span><span class="p">()</span> <span class="o">:</span> <span class="n">SpellScriptLoader</span><span class="p">(</span><span class="s">&quot;spell_ex&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-454"></a>
<a name="line-455"></a>        <span class="k">class</span> <span class="nc">spell_ex_AuraScript</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AuraScript</span>
<a name="line-456"></a>        <span class="p">{</span>
<a name="line-457"></a>            <span class="n">PrepareAuraScript</span><span class="p">(</span><span class="n">spell_ex</span><span class="p">)</span>
<a name="line-458"></a>            <span class="c1">//bool Validate(SpellInfo const* spellEntry){return true;}</span>
<a name="line-459"></a>            <span class="c1">//bool Load(){return true;}</span>
<a name="line-460"></a>            <span class="c1">//void Unload(){}</span>
<a name="line-461"></a>
<a name="line-462"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff, AuraEffectHandleModes mode) //OnEffectApply += AuraEffectApplyFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY, AURA_EFFECT_HANDLE_REAL);</span>
<a name="line-463"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff, AuraEffectHandleModes mode) //OnEffectRemove += AuraEffectRemoveFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY, AURA_EFFECT_HANDLE_REAL);</span>
<a name="line-464"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff) //OnEffectPeriodic += AuraEffectPeriodicFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY);</span>
<a name="line-465"></a>            <span class="c1">//void spell_ex_SpellScript::Function(AuraEffectPtr aurEff) //OnEffectUpdatePeriodic += AuraEffectUpdatePeriodicFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY);</span>
<a name="line-466"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff, int32&amp; amount, bool&amp; canBeRecalculated) //DoEffectCalcAmount += AuraEffectCalcAmountFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY);</span>
<a name="line-467"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff, bool&amp; isPeriodic, int32&amp; amplitude) //OnEffectCalcPeriodic += AuraEffectCalcPeriodicFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY);</span>
<a name="line-468"></a>            <span class="c1">//void spell_ex_SpellScript::Function(constAuraEffectPtr aurEff, SpellModifier*&amp; spellMod) //OnEffectCalcSpellMod += AuraEffectCalcSpellModFn(spell_ex_SpellScript::Function, EFFECT_ANY, SPELL_AURA_ANY);</span>
<a name="line-469"></a>            <span class="kt">void</span> <span class="n">Register</span><span class="p">()</span>
<a name="line-470"></a>            <span class="p">{</span>
<a name="line-471"></a>            <span class="p">}</span>
<a name="line-472"></a>        <span class="p">};</span>
<a name="line-473"></a>
<a name="line-474"></a>        <span class="n">AuraScript</span><span class="o">*</span> <span class="nf">GetAuraScript</span><span class="p">()</span> <span class="k">const</span>
<a name="line-475"></a>        <span class="p">{</span>
<a name="line-476"></a>            <span class="k">return</span> <span class="k">new</span> <span class="n">spell_ex_AuraScript</span><span class="p">();</span>
<a name="line-477"></a>        <span class="p">}</span>
<a name="line-478"></a><span class="p">};</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.73 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.sourceforge.net">http://cppcheck.sourceforge.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
