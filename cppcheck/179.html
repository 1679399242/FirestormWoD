
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [project name]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [project name]: /Users/MilleniumStudio/Git/wod/src/server/game/OutdoorPvP/OutdoorPvP.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> OutdoorPvP.h</p>
<a href='179.html#line-89'> noExplicitConstructor 89</a><a href='179.html#line-89'> noExplicitConstructor 89</a><a href='179.html#line-361'> noExplicitConstructor 361</a><a href='179.html#line-361'> noExplicitConstructor 361</a><a href='179.html#line-365'> functionConst 365</a><a href='179.html#line-365'> functionConst 365</a><a href='179.html#line-408'> functionConst 408</a><a href='179.html#line-408'> functionConst 408</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-2"></a><span class="c1">//</span>
<a name="line-3"></a><span class="c1">//  MILLENIUM-STUDIO</span>
<a name="line-4"></a><span class="c1">//  Copyright 2016 Millenium-studio SARL</span>
<a name="line-5"></a><span class="c1">//  All Rights Reserved.</span>
<a name="line-6"></a><span class="c1">//</span>
<a name="line-7"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-8"></a>
<a name="line-9"></a><span class="cp">#ifndef OUTDOOR_PVP_H_</span>
<a name="line-10"></a><span class="cp">#define OUTDOOR_PVP_H_</span>
<a name="line-11"></a>
<a name="line-12"></a><span class="cp">#include</span> <span class="cpf">&quot;Utilities/Util.h&quot;</span><span class="cp"></span>
<a name="line-13"></a><span class="cp">#include</span> <span class="cpf">&quot;SharedDefines.h&quot;</span><span class="cp"></span>
<a name="line-14"></a><span class="cp">#include</span> <span class="cpf">&quot;ZoneScript.h&quot;</span><span class="cp"></span>
<a name="line-15"></a><span class="cp">#include</span> <span class="cpf">&quot;ObjectAccessor.h&quot;</span><span class="cp"></span>
<a name="line-16"></a>
<a name="line-17"></a><span class="n">class</span> <span class="n">GameObject</span><span class="p">;</span>
<a name="line-18"></a>
<a name="line-19"></a><span class="k">enum</span> <span class="n">OutdoorPvPTypes</span>
<a name="line-20"></a><span class="p">{</span>
<a name="line-21"></a>    <span class="n">OUTDOOR_PVP_HP</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<a name="line-22"></a>    <span class="n">OUTDOOR_PVP_NA</span>      <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a name="line-23"></a>    <span class="n">OUTDOOR_PVP_TF</span>      <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<a name="line-24"></a>    <span class="n">OUTDOOR_PVP_ZM</span>      <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<a name="line-25"></a>    <span class="n">OUTDOOR_PVP_SI</span>      <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<a name="line-26"></a>    <span class="n">OUTDOOR_PVP_ASHRAN</span>  <span class="o">=</span> <span class="mi">6</span>
<a name="line-27"></a><span class="p">};</span>
<a name="line-28"></a>
<a name="line-29"></a><span class="cp">#define MAX_OUTDOORPVP_TYPES 7</span>
<a name="line-30"></a>
<a name="line-31"></a><span class="k">enum</span> <span class="n">ObjectiveStates</span>
<a name="line-32"></a><span class="p">{</span>
<a name="line-33"></a>    <span class="n">OBJECTIVESTATE_NEUTRAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a name="line-34"></a>    <span class="n">OBJECTIVESTATE_ALLIANCE</span><span class="p">,</span>
<a name="line-35"></a>    <span class="n">OBJECTIVESTATE_HORDE</span><span class="p">,</span>
<a name="line-36"></a>    <span class="n">OBJECTIVESTATE_NEUTRAL_ALLIANCE_CHALLENGE</span><span class="p">,</span>
<a name="line-37"></a>    <span class="n">OBJECTIVESTATE_NEUTRAL_HORDE_CHALLENGE</span><span class="p">,</span>
<a name="line-38"></a>    <span class="n">OBJECTIVESTATE_ALLIANCE_HORDE_CHALLENGE</span><span class="p">,</span>
<a name="line-39"></a>    <span class="n">OBJECTIVESTATE_HORDE_ALLIANCE_CHALLENGE</span><span class="p">,</span>
<a name="line-40"></a><span class="p">};</span>
<a name="line-41"></a>
<a name="line-42"></a><span class="cp">#define OTHER_TEAM(a) (a == TEAM_ALLIANCE ? TEAM_HORDE : TEAM_ALLIANCE)</span>
<a name="line-43"></a>
<a name="line-44"></a><span class="c1">// struct for go spawning</span>
<a name="line-45"></a><span class="k">struct</span> <span class="n">go_type</span>
<a name="line-46"></a><span class="p">{</span>
<a name="line-47"></a>    <span class="n">uint32</span> <span class="n">entry</span><span class="p">;</span>
<a name="line-48"></a>    <span class="n">uint32</span> <span class="n">map</span><span class="p">;</span>
<a name="line-49"></a>    <span class="kt">float</span> <span class="n">x</span><span class="p">;</span>
<a name="line-50"></a>    <span class="kt">float</span> <span class="n">y</span><span class="p">;</span>
<a name="line-51"></a>    <span class="kt">float</span> <span class="n">z</span><span class="p">;</span>
<a name="line-52"></a>    <span class="kt">float</span> <span class="n">o</span><span class="p">;</span>
<a name="line-53"></a>    <span class="kt">float</span> <span class="n">rot0</span><span class="p">;</span>
<a name="line-54"></a>    <span class="kt">float</span> <span class="n">rot1</span><span class="p">;</span>
<a name="line-55"></a>    <span class="kt">float</span> <span class="n">rot2</span><span class="p">;</span>
<a name="line-56"></a>    <span class="kt">float</span> <span class="n">rot3</span><span class="p">;</span>
<a name="line-57"></a><span class="p">};</span>
<a name="line-58"></a>
<a name="line-59"></a><span class="c1">// struct for creature spawning</span>
<a name="line-60"></a><span class="k">struct</span> <span class="n">creature_type</span>
<a name="line-61"></a><span class="p">{</span>
<a name="line-62"></a>    <span class="n">uint32</span> <span class="n">entry</span><span class="p">;</span>
<a name="line-63"></a>    <span class="n">uint32</span> <span class="n">teamval</span><span class="p">;</span>
<a name="line-64"></a>    <span class="n">uint32</span> <span class="n">map</span><span class="p">;</span>
<a name="line-65"></a>    <span class="kt">float</span> <span class="n">x</span><span class="p">;</span>
<a name="line-66"></a>    <span class="kt">float</span> <span class="n">y</span><span class="p">;</span>
<a name="line-67"></a>    <span class="kt">float</span> <span class="n">z</span><span class="p">;</span>
<a name="line-68"></a>    <span class="kt">float</span> <span class="n">o</span><span class="p">;</span>
<a name="line-69"></a><span class="p">};</span>
<a name="line-70"></a>
<a name="line-71"></a><span class="c1">// some class predefs</span>
<a name="line-72"></a><span class="n">class</span> <span class="n">Player</span><span class="p">;</span>
<a name="line-73"></a><span class="n">class</span> <span class="n">GameObject</span><span class="p">;</span>
<a name="line-74"></a><span class="n">class</span> <span class="n">WorldPacket</span><span class="p">;</span>
<a name="line-75"></a><span class="n">class</span> <span class="n">Creature</span><span class="p">;</span>
<a name="line-76"></a><span class="n">class</span> <span class="n">Unit</span><span class="p">;</span>
<a name="line-77"></a><span class="k">struct</span> <span class="n">GossipMenuItems</span><span class="p">;</span>
<a name="line-78"></a><span class="n">class</span> <span class="n">OutdoorPvP</span><span class="p">;</span>
<a name="line-79"></a><span class="n">class</span> <span class="n">OutdoorGraveyard</span><span class="p">;</span>
<a name="line-80"></a>
<a name="line-81"></a><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">Player</span><span class="o">*&gt;</span> <span class="n">PlayerSet</span><span class="p">;</span>
<a name="line-82"></a><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">OutdoorGraveyard</span><span class="o">*&gt;</span> <span class="n">GraveyardVector</span><span class="p">;</span>
<a name="line-83"></a><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">uint64</span><span class="o">&gt;</span> <span class="n">GuidSet</span><span class="p">;</span>
<a name="line-84"></a>
<a name="line-85"></a><span class="n">class</span> <span class="n">OPvPCapturePoint</span>
<a name="line-86"></a><span class="p">{</span>
<a name="line-87"></a>    <span class="nl">public</span><span class="p">:</span>
<a name="line-88"></a>
<a name="line-89"></a><span class="hll">        <span class="n">OPvPCapturePoint</span><span class="p">(</span><span class="n">OutdoorPvP</span><span class="o">*</span> <span class="n">pvp</span><span class="p">);</span><div class='verbose expandable'><span class='error2'>&lt;--- Class 'OPvPCapturePoint' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Class &apos;OPvPCapturePoint&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div><div class='verbose expandable'><span class='error2'>&lt;--- Class 'OPvPCapturePoint' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Class &apos;OPvPCapturePoint&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div>
</span><a name="line-90"></a>
<a name="line-91"></a>        <span class="n">virtual</span> <span class="o">~</span><span class="n">OPvPCapturePoint</span><span class="p">()</span> <span class="p">{}</span>
<a name="line-92"></a>
<a name="line-93"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="n">FillInitialWorldStates</span><span class="p">(</span><span class="n">ByteBuffer</span> <span class="o">&amp;</span> <span class="cm">/*data*/</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-94"></a>
<a name="line-95"></a>        <span class="c1">// send world state update to all players present</span>
<a name="line-96"></a>        <span class="kt">void</span> <span class="n">SendUpdateWorldState</span><span class="p">(</span><span class="n">uint32</span> <span class="n">field</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">value</span><span class="p">);</span>
<a name="line-97"></a>
<a name="line-98"></a>        <span class="c1">// send kill notify to players in the controlling faction</span>
<a name="line-99"></a>        <span class="kt">void</span> <span class="nf">SendObjectiveComplete</span><span class="p">(</span><span class="n">uint32</span> <span class="n">id</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">guid</span><span class="p">);</span>
<a name="line-100"></a>
<a name="line-101"></a>        <span class="c1">// used when player is activated/inactivated in the area</span>
<a name="line-102"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandlePlayerEnter</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">);</span>
<a name="line-103"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerLeave</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">);</span>
<a name="line-104"></a>
<a name="line-105"></a>        <span class="c1">// checks if player is in range of a capture credit marker</span>
<a name="line-106"></a>        <span class="kt">bool</span> <span class="nf">IsInsideObjective</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<a name="line-107"></a>
<a name="line-108"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleCustomSpell</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId</span><span class="p">,</span> <span class="n">GameObject</span><span class="o">*</span> <span class="n">go</span><span class="p">);</span>
<a name="line-109"></a>
<a name="line-110"></a>        <span class="n">virtual</span> <span class="n">int32</span> <span class="nf">HandleOpenGo</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">guid</span><span class="p">);</span>
<a name="line-111"></a>
<a name="line-112"></a>        <span class="c1">// returns true if the state of the objective has changed, in this case, the OutdoorPvP must send a world state ui update.</span>
<a name="line-113"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">Update</span><span class="p">(</span><span class="n">uint32</span> <span class="n">diff</span><span class="p">);</span>
<a name="line-114"></a>
<a name="line-115"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">ChangeState</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-116"></a>
<a name="line-117"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">ChangeTeam</span><span class="p">(</span><span class="n">TeamId</span> <span class="cm">/*oldTeam*/</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-118"></a>
<a name="line-119"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">SendChangePhase</span><span class="p">();</span>
<a name="line-120"></a>
<a name="line-121"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleGossipOption</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">guid</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">gossipid</span><span class="p">);</span>
<a name="line-122"></a>
<a name="line-123"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">CanTalkTo</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">Creature</span><span class="o">*</span> <span class="n">c</span><span class="p">,</span> <span class="n">GossipMenuItems</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">gso</span><span class="p">);</span>
<a name="line-124"></a>
<a name="line-125"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleDropFlag</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId</span><span class="p">);</span>
<a name="line-126"></a>
<a name="line-127"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">DeleteSpawns</span><span class="p">();</span>
<a name="line-128"></a>
<a name="line-129"></a>        <span class="n">uint64</span> <span class="n">m_capturePointGUID</span><span class="p">;</span>
<a name="line-130"></a>
<a name="line-131"></a>        <span class="n">GameObject</span><span class="o">*</span> <span class="n">m_capturePoint</span><span class="p">;</span>
<a name="line-132"></a>
<a name="line-133"></a>        <span class="kt">void</span> <span class="nf">AddGO</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">guid</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">entry</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-134"></a>        <span class="kt">void</span> <span class="nf">AddCre</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">guid</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">entry</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-135"></a>
<a name="line-136"></a>        <span class="kt">bool</span> <span class="nf">SetCapturePointData</span><span class="p">(</span><span class="n">go_type</span> <span class="n">p_Data</span><span class="p">)</span>
<a name="line-137"></a>        <span class="p">{</span>
<a name="line-138"></a>            <span class="k">return</span> <span class="n">SetCapturePointData</span><span class="p">(</span><span class="n">p_Data</span><span class="p">.</span><span class="n">entry</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">o</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot0</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot1</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot2</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot3</span><span class="p">);</span>
<a name="line-139"></a>        <span class="p">}</span>
<a name="line-140"></a>        <span class="kt">bool</span> <span class="nf">SetCapturePointData</span><span class="p">(</span><span class="n">uint32</span> <span class="n">entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">map</span><span class="p">,</span> <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">o</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a name="line-141"></a>            <span class="kt">float</span> <span class="n">rotation0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-142"></a>
<a name="line-143"></a>        <span class="kt">void</span> <span class="nf">SetState</span><span class="p">(</span><span class="n">ObjectiveStates</span> <span class="n">p_State</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_State</span> <span class="o">=</span> <span class="n">p_State</span><span class="p">;</span> <span class="p">}</span>
<a name="line-144"></a>        <span class="kt">void</span> <span class="nf">SetValue</span><span class="p">(</span><span class="kt">float</span> <span class="n">p_Value</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_value</span> <span class="o">=</span> <span class="n">p_Value</span><span class="p">;</span> <span class="p">}</span>
<a name="line-145"></a>
<a name="line-146"></a>    <span class="nl">protected</span><span class="p">:</span>
<a name="line-147"></a>
<a name="line-148"></a>        <span class="kt">bool</span> <span class="n">AddObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">go_type</span> <span class="n">p_Data</span><span class="p">)</span>
<a name="line-149"></a>        <span class="p">{</span>
<a name="line-150"></a>            <span class="k">return</span> <span class="n">AddObject</span><span class="p">(</span><span class="n">p_Type</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">entry</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">o</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot0</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot1</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot2</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot3</span><span class="p">);</span>
<a name="line-151"></a>        <span class="p">}</span>
<a name="line-152"></a>        <span class="kt">bool</span> <span class="n">AddObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">map</span><span class="p">,</span> <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">o</span><span class="p">,</span>
<a name="line-153"></a>            <span class="kt">float</span> <span class="n">rotation0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation3</span><span class="p">);</span>
<a name="line-154"></a>        <span class="kt">bool</span> <span class="nf">AddCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">creature_type</span> <span class="n">p_Data</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_SpawnTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-155"></a>        <span class="p">{</span>
<a name="line-156"></a>            <span class="k">return</span> <span class="n">AddCreature</span><span class="p">(</span><span class="n">p_Type</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">entry</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">teamval</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">o</span><span class="p">,</span> <span class="n">p_SpawnTime</span><span class="p">);</span>
<a name="line-157"></a>        <span class="p">}</span>
<a name="line-158"></a>        <span class="kt">bool</span> <span class="nf">AddCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">teamval</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">map</span><span class="p">,</span> <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">o</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spawntimedelay</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-159"></a>
<a name="line-160"></a>        <span class="kt">bool</span> <span class="nf">DelCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">);</span>
<a name="line-161"></a>        <span class="kt">bool</span> <span class="nf">DelObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">type</span><span class="p">);</span>
<a name="line-162"></a>
<a name="line-163"></a>        <span class="kt">bool</span> <span class="nf">DelCapturePoint</span><span class="p">();</span>
<a name="line-164"></a>
<a name="line-165"></a>    <span class="nl">protected</span><span class="p">:</span>
<a name="line-166"></a>
<a name="line-167"></a>        <span class="c1">// active players in the area of the objective, 0 - alliance, 1 - horde</span>
<a name="line-168"></a>        <span class="n">GuidSet</span> <span class="n">m_activePlayers</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-169"></a>
<a name="line-170"></a>        <span class="c1">// total shift needed to capture the objective</span>
<a name="line-171"></a>        <span class="kt">float</span> <span class="n">m_maxValue</span><span class="p">;</span>
<a name="line-172"></a>        <span class="kt">float</span> <span class="n">m_minValue</span><span class="p">;</span>
<a name="line-173"></a>
<a name="line-174"></a>        <span class="c1">// maximum speed of capture</span>
<a name="line-175"></a>        <span class="kt">float</span> <span class="n">m_maxSpeed</span><span class="p">;</span>
<a name="line-176"></a>
<a name="line-177"></a>        <span class="c1">// the status of the objective</span>
<a name="line-178"></a>        <span class="kt">float</span> <span class="n">m_value</span><span class="p">;</span>
<a name="line-179"></a>
<a name="line-180"></a>        <span class="n">TeamId</span> <span class="n">m_team</span><span class="p">;</span>
<a name="line-181"></a>
<a name="line-182"></a>        <span class="c1">// objective states</span>
<a name="line-183"></a>        <span class="n">ObjectiveStates</span> <span class="n">m_OldState</span><span class="p">;</span>
<a name="line-184"></a>        <span class="n">ObjectiveStates</span> <span class="n">m_State</span><span class="p">;</span>
<a name="line-185"></a>
<a name="line-186"></a>        <span class="c1">// neutral value on capture bar</span>
<a name="line-187"></a>        <span class="n">uint32</span> <span class="n">m_neutralValuePct</span><span class="p">;</span>
<a name="line-188"></a>
<a name="line-189"></a>        <span class="c1">// pointer to the OutdoorPvP this objective belongs to</span>
<a name="line-190"></a>        <span class="n">OutdoorPvP</span><span class="o">*</span> <span class="n">m_PvP</span><span class="p">;</span>
<a name="line-191"></a>
<a name="line-192"></a>        <span class="c1">// map to store the various gameobjects and creatures spawned by the objective</span>
<a name="line-193"></a>        <span class="c1">//        type, guid</span>
<a name="line-194"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint32</span><span class="p">,</span> <span class="n">uint64</span><span class="o">&gt;</span> <span class="n">m_Objects</span><span class="p">;</span>
<a name="line-195"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint32</span><span class="p">,</span> <span class="n">uint64</span><span class="o">&gt;</span> <span class="n">m_Creatures</span><span class="p">;</span>
<a name="line-196"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint64</span><span class="p">,</span> <span class="n">uint32</span><span class="o">&gt;</span> <span class="n">m_ObjectTypes</span><span class="p">;</span>
<a name="line-197"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint64</span><span class="p">,</span> <span class="n">uint32</span><span class="o">&gt;</span> <span class="n">m_CreatureTypes</span><span class="p">;</span>
<a name="line-198"></a><span class="p">};</span>
<a name="line-199"></a>
<a name="line-200"></a><span class="c1">// base class for specific outdoor pvp handlers</span>
<a name="line-201"></a><span class="n">class</span> <span class="nl">OutdoorPvP</span> <span class="p">:</span> <span class="n">public</span> <span class="n">ZoneScript</span>
<a name="line-202"></a><span class="p">{</span>
<a name="line-203"></a>    <span class="n">friend</span> <span class="n">class</span> <span class="n">OutdoorPvPMgr</span><span class="p">;</span>
<a name="line-204"></a>
<a name="line-205"></a>    <span class="nl">public</span><span class="p">:</span>
<a name="line-206"></a>
<a name="line-207"></a>        <span class="c1">// ctor</span>
<a name="line-208"></a>        <span class="n">OutdoorPvP</span><span class="p">();</span>
<a name="line-209"></a>
<a name="line-210"></a>        <span class="c1">// dtor</span>
<a name="line-211"></a>        <span class="n">virtual</span> <span class="o">~</span><span class="n">OutdoorPvP</span><span class="p">();</span>
<a name="line-212"></a>
<a name="line-213"></a>        <span class="c1">// deletes all gos/creatures spawned by the pvp</span>
<a name="line-214"></a>        <span class="kt">void</span> <span class="nf">DeleteSpawns</span><span class="p">();</span>
<a name="line-215"></a>
<a name="line-216"></a>        <span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint64</span><span class="p">,</span> <span class="n">OPvPCapturePoint</span><span class="o">*&gt;</span> <span class="n">OPvPCapturePointMap</span><span class="p">;</span>
<a name="line-217"></a>
<a name="line-218"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">FillInitialWorldStates</span><span class="p">(</span><span class="n">ByteBuffer</span> <span class="o">&amp;</span> <span class="cm">/*data*/</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-219"></a>
<a name="line-220"></a>        <span class="c1">// called when a player triggers an areatrigger</span>
<a name="line-221"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleAreaTrigger</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">trigger</span><span class="p">);</span>
<a name="line-222"></a>
<a name="line-223"></a>        <span class="c1">// called on custom spell</span>
<a name="line-224"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleCustomSpell</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId</span><span class="p">,</span> <span class="n">GameObject</span><span class="o">*</span> <span class="n">go</span><span class="p">);</span>
<a name="line-225"></a>
<a name="line-226"></a>        <span class="c1">// called on go use</span>
<a name="line-227"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleOpenGo</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">guid</span><span class="p">);</span>
<a name="line-228"></a>
<a name="line-229"></a>        <span class="c1">// setup stuff</span>
<a name="line-230"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">SetupOutdoorPvP</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="nb">true</span><span class="p">;}</span>
<a name="line-231"></a>
<a name="line-232"></a>        <span class="kt">void</span> <span class="nf">OnGameObjectCreate</span><span class="p">(</span><span class="n">GameObject</span><span class="o">*</span> <span class="n">p_GameObject</span><span class="p">);</span>
<a name="line-233"></a>        <span class="kt">void</span> <span class="nf">OnGameObjectRemove</span><span class="p">(</span><span class="n">GameObject</span><span class="o">*</span> <span class="n">p_GameObject</span><span class="p">);</span>
<a name="line-234"></a>        <span class="kt">void</span> <span class="nf">OnCreatureCreate</span><span class="p">(</span><span class="n">Creature</span><span class="o">*</span> <span class="cm">/*p_Creature*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-235"></a>        <span class="kt">void</span> <span class="nf">OnCreatureRemove</span><span class="p">(</span><span class="n">Creature</span><span class="o">*</span> <span class="cm">/*p_Creature*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-236"></a>
<a name="line-237"></a>        <span class="c1">// send world state update to all players present</span>
<a name="line-238"></a>        <span class="kt">void</span> <span class="nf">SendUpdateWorldState</span><span class="p">(</span><span class="n">uint32</span> <span class="n">field</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">value</span><span class="p">);</span>
<a name="line-239"></a>
<a name="line-240"></a>        <span class="c1">// called by OutdoorPvPMgr, updates the objectives and if needed, sends new worldstateui information</span>
<a name="line-241"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">Update</span><span class="p">(</span><span class="n">uint32</span> <span class="n">diff</span><span class="p">);</span>
<a name="line-242"></a>
<a name="line-243"></a>        <span class="c1">// handle npc/player kill</span>
<a name="line-244"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandleKill</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">killer</span><span class="p">,</span> <span class="n">Unit</span><span class="o">*</span> <span class="n">killed</span><span class="p">);</span>
<a name="line-245"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandleKillImpl</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*killer*/</span><span class="p">,</span> <span class="n">Unit</span><span class="o">*</span> <span class="cm">/*killed*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-246"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerKilled</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-247"></a>
<a name="line-248"></a>        <span class="c1">/// Handle some custom PvP loots</span>
<a name="line-249"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">FillCustomPvPLoots</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Looter*/</span><span class="p">,</span> <span class="n">Loot</span><span class="o">&amp;</span> <span class="cm">/*p_Loot*/</span><span class="p">,</span> <span class="n">uint64</span> <span class="cm">/*p_Container*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-250"></a>
<a name="line-251"></a>        <span class="c1">// checks if player is in range of a capture credit marker</span>
<a name="line-252"></a>        <span class="kt">bool</span> <span class="nf">IsInsideObjective</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<a name="line-253"></a>
<a name="line-254"></a>        <span class="c1">// awards rewards for player kill</span>
<a name="line-255"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">AwardKillBonus</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*player*/</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-256"></a>
<a name="line-257"></a>        <span class="n">uint32</span> <span class="nf">GetTypeId</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="n">m_TypeId</span><span class="p">;}</span>
<a name="line-258"></a>
<a name="line-259"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleDropFlag</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId</span><span class="p">);</span>
<a name="line-260"></a>
<a name="line-261"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">HandleGossipOption</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">guid</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">gossipid</span><span class="p">);</span>
<a name="line-262"></a>
<a name="line-263"></a>        <span class="n">virtual</span> <span class="kt">bool</span> <span class="nf">CanTalkTo</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">,</span> <span class="n">Creature</span><span class="o">*</span> <span class="n">c</span><span class="p">,</span> <span class="n">GossipMenuItems</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">gso</span><span class="p">);</span>
<a name="line-264"></a>
<a name="line-265"></a>        <span class="kt">void</span> <span class="nf">TeamApplyBuff</span><span class="p">(</span><span class="n">TeamId</span> <span class="n">team</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">spellId2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-266"></a>
<a name="line-267"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandleBFMGREntryInviteResponse</span><span class="p">(</span><span class="kt">bool</span> <span class="cm">/*p_Accepted*/</span><span class="p">,</span> <span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-268"></a>
<a name="line-269"></a>        <span class="n">virtual</span> <span class="n">WorldSafeLocsEntry</span> <span class="k">const</span><span class="o">*</span> <span class="nf">GetClosestGraveyard</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">p_Player</span><span class="p">);</span>
<a name="line-270"></a>
<a name="line-271"></a>        <span class="kt">void</span> <span class="nf">SendAreaSpiritHealerQueryOpcode</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">p_Player</span><span class="p">,</span> <span class="n">uint64</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">p_Guid</span><span class="p">);</span>
<a name="line-272"></a>        <span class="kt">void</span> <span class="nf">AddPlayerToResurrectQueue</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_SpiritGuid</span><span class="p">,</span> <span class="n">uint64</span> <span class="n">p_PlayerGuid</span><span class="p">);</span>
<a name="line-273"></a>        <span class="n">OutdoorGraveyard</span><span class="o">*</span> <span class="nf">GetGraveyardById</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_ID</span><span class="p">);</span>
<a name="line-274"></a>        <span class="kt">void</span> <span class="nf">SetGraveyardNumber</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Count</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_GraveyardList</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">p_Count</span><span class="p">);</span> <span class="p">}</span>
<a name="line-275"></a>
<a name="line-276"></a>        <span class="n">uint64</span> <span class="nf">GetCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">);</span>
<a name="line-277"></a>
<a name="line-278"></a>    <span class="nl">protected</span><span class="p">:</span>
<a name="line-279"></a>
<a name="line-280"></a>        <span class="c1">// the map of the objectives belonging to this outdoorpvp</span>
<a name="line-281"></a>        <span class="n">OPvPCapturePointMap</span> <span class="n">m_capturePoints</span><span class="p">;</span>
<a name="line-282"></a>
<a name="line-283"></a>        <span class="n">GuidSet</span> <span class="n">m_Players</span><span class="p">[</span><span class="n">MS</span><span class="o">::</span><span class="n">Battlegrounds</span><span class="o">::</span><span class="n">TeamsCount</span><span class="o">::</span><span class="n">Value</span><span class="p">];</span>
<a name="line-284"></a>
<a name="line-285"></a>        <span class="n">uint32</span> <span class="n">m_TypeId</span><span class="p">;</span>
<a name="line-286"></a>
<a name="line-287"></a>        <span class="c1">// map to store the various gameobjects and creatures spawned by the objective</span>
<a name="line-288"></a>        <span class="c1">//       type,   guid</span>
<a name="line-289"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint32</span><span class="p">,</span> <span class="n">uint64</span><span class="o">&gt;</span> <span class="n">m_Creatures</span><span class="p">;</span>
<a name="line-290"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint64</span><span class="p">,</span> <span class="n">uint32</span><span class="o">&gt;</span> <span class="n">m_CreatureTypes</span><span class="p">;</span>
<a name="line-291"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint32</span><span class="p">,</span> <span class="n">uint64</span><span class="o">&gt;</span> <span class="n">m_Objects</span><span class="p">;</span>
<a name="line-292"></a>        <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">uint64</span><span class="p">,</span> <span class="n">uint32</span><span class="o">&gt;</span> <span class="n">m_ObjectTypes</span><span class="p">;</span>
<a name="line-293"></a>
<a name="line-294"></a>        <span class="kt">bool</span> <span class="n">m_sendUpdate</span><span class="p">;</span>
<a name="line-295"></a>
<a name="line-296"></a>        <span class="c1">/// Graveyard variables</span>
<a name="line-297"></a>        <span class="n">GraveyardVector</span> <span class="n">m_GraveyardList</span><span class="p">;</span>    <span class="c1">///&lt; Vector which contain the different Graveyards of the battle</span>
<a name="line-298"></a>        <span class="n">uint32</span> <span class="n">m_LastResurectTimer</span><span class="p">;</span>         <span class="c1">///&lt; Timer for resurrect players every 30s</span>
<a name="line-299"></a>
<a name="line-300"></a>        <span class="c1">// world state stuff</span>
<a name="line-301"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">SendRemoveWorldStates</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-302"></a>
<a name="line-303"></a>        <span class="kt">void</span> <span class="nf">BroadcastPacket</span><span class="p">(</span><span class="n">WorldPacket</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<a name="line-304"></a>
<a name="line-305"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerEnterZone</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">p_Player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_ZoneID</span><span class="p">);</span>
<a name="line-306"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerLeaveZone</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">p_Player</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_ZoneID</span><span class="p">);</span>
<a name="line-307"></a>
<a name="line-308"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerEnterMap</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="cm">/*p_MapID*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-309"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerLeaveMap</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="cm">/*p_MapID*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-310"></a>
<a name="line-311"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerEnterArea</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="cm">/*p_AreaID*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-312"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerLeaveArea</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="cm">/*p_AreaID*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-313"></a>
<a name="line-314"></a>        <span class="n">virtual</span> <span class="kt">void</span> <span class="nf">HandlePlayerResurrects</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="cm">/*p_Player*/</span><span class="p">,</span> <span class="n">uint32</span> <span class="cm">/*p_ZoneID*/</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<a name="line-315"></a>
<a name="line-316"></a>        <span class="kt">void</span> <span class="nf">AddCapturePoint</span><span class="p">(</span><span class="n">OPvPCapturePoint</span><span class="o">*</span> <span class="n">cp</span><span class="p">)</span>
<a name="line-317"></a>        <span class="p">{</span>
<a name="line-318"></a>            <span class="n">m_capturePoints</span><span class="p">[</span><span class="n">cp</span><span class="o">-&gt;</span><span class="n">m_capturePointGUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">cp</span><span class="p">;</span>
<a name="line-319"></a>
<a name="line-320"></a>            <span class="c1">// Must do that again, in case of we tried to add capture point before...</span>
<a name="line-321"></a>            <span class="c1">// ...we tried to add capture point itself</span>
<a name="line-322"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">GameObject</span><span class="o">*</span> <span class="n">l_Go</span> <span class="o">=</span> <span class="n">HashMapHolder</span><span class="o">&lt;</span><span class="n">GameObject</span><span class="o">&gt;::</span><span class="n">Find</span><span class="p">(</span><span class="n">cp</span><span class="o">-&gt;</span><span class="n">m_capturePointGUID</span><span class="p">))</span>
<a name="line-323"></a>                <span class="n">cp</span><span class="o">-&gt;</span><span class="n">m_capturePoint</span> <span class="o">=</span> <span class="n">l_Go</span><span class="p">;</span>
<a name="line-324"></a>        <span class="p">}</span>
<a name="line-325"></a>
<a name="line-326"></a>        <span class="n">OPvPCapturePoint</span> <span class="o">*</span> <span class="nf">GetCapturePoint</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_Guid</span><span class="p">)</span> <span class="k">const</span>
<a name="line-327"></a>        <span class="p">{</span>
<a name="line-328"></a>            <span class="n">OutdoorPvP</span><span class="o">::</span><span class="n">OPvPCapturePointMap</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">itr</span> <span class="o">=</span> <span class="n">m_capturePoints</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">p_Guid</span><span class="p">);</span>
<a name="line-329"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">itr</span> <span class="o">!=</span> <span class="n">m_capturePoints</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
<a name="line-330"></a>                <span class="k">return</span> <span class="n">itr</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span>
<a name="line-331"></a>            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<a name="line-332"></a>        <span class="p">}</span>
<a name="line-333"></a>
<a name="line-334"></a>        <span class="kt">void</span> <span class="nf">RegisterZone</span><span class="p">(</span><span class="n">uint32</span> <span class="n">zoneid</span><span class="p">);</span>
<a name="line-335"></a>
<a name="line-336"></a>        <span class="kt">bool</span> <span class="nf">HasPlayer</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">player</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<a name="line-337"></a>
<a name="line-338"></a>        <span class="kt">void</span> <span class="nf">TeamCastSpell</span><span class="p">(</span><span class="n">TeamId</span> <span class="n">team</span><span class="p">,</span> <span class="n">int32</span> <span class="n">spellId</span><span class="p">);</span>
<a name="line-339"></a>
<a name="line-340"></a>        <span class="kt">void</span> <span class="nf">AddAreaTrigger</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_PhaseMask</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_SpellVisualID</span><span class="p">,</span> <span class="n">Position</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">p_Pos</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Duration</span><span class="p">,</span> <span class="n">Map</span><span class="o">*</span> <span class="n">p_Map</span><span class="p">);</span>
<a name="line-341"></a>
<a name="line-342"></a>        <span class="kt">bool</span> <span class="nf">AddCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">creature_type</span> <span class="n">p_Data</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_SpawnTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-343"></a>        <span class="p">{</span>
<a name="line-344"></a>            <span class="k">return</span> <span class="n">AddCreature</span><span class="p">(</span><span class="n">p_Type</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">entry</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">teamval</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">o</span><span class="p">,</span> <span class="n">p_SpawnTime</span><span class="p">);</span>
<a name="line-345"></a>        <span class="p">}</span>
<a name="line-346"></a>        <span class="kt">bool</span> <span class="nf">AddCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Team</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_MapID</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_X</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_O</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_SpawnTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-347"></a>        <span class="kt">bool</span> <span class="nf">DelCreature</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">);</span>
<a name="line-348"></a>
<a name="line-349"></a>        <span class="kt">bool</span> <span class="nf">AddObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">go_type</span> <span class="n">p_Data</span><span class="p">)</span>
<a name="line-350"></a>        <span class="p">{</span>
<a name="line-351"></a>            <span class="k">return</span> <span class="n">AddObject</span><span class="p">(</span><span class="n">p_Type</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">entry</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">o</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot0</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot1</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot2</span><span class="p">,</span> <span class="n">p_Data</span><span class="p">.</span><span class="n">rot3</span><span class="p">);</span>
<a name="line-352"></a>        <span class="p">}</span>
<a name="line-353"></a>        <span class="kt">bool</span> <span class="nf">AddObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Entry</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Map</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_X</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_O</span><span class="p">,</span>
<a name="line-354"></a>            <span class="kt">float</span> <span class="n">p_Rot0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Rot1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Rot2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">p_Rot3</span><span class="p">);</span>
<a name="line-355"></a>        <span class="kt">bool</span> <span class="nf">DelObject</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Type</span><span class="p">);</span>
<a name="line-356"></a><span class="p">};</span>
<a name="line-357"></a>
<a name="line-358"></a><span class="n">class</span> <span class="n">OutdoorGraveyard</span>
<a name="line-359"></a><span class="p">{</span>
<a name="line-360"></a>    <span class="nl">public</span><span class="p">:</span>
<a name="line-361"></a><span class="hll">        <span class="n">OutdoorGraveyard</span><span class="p">(</span><span class="n">OutdoorPvP</span><span class="o">*</span> <span class="n">p_OutdoorPvP</span><span class="p">);</span><div class='verbose expandable'><span class='error2'>&lt;--- Class 'OutdoorGraveyard' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Class &apos;OutdoorGraveyard&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div><div class='verbose expandable'><span class='error2'>&lt;--- Class 'OutdoorGraveyard' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Class &apos;OutdoorGraveyard&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div>
</span><a name="line-362"></a>
<a name="line-363"></a>        <span class="c1">/// Method to changing who controls the graveyard</span>
<a name="line-364"></a>        <span class="kt">void</span> <span class="nf">GiveControlTo</span><span class="p">(</span><span class="n">TeamId</span> <span class="n">p_Team</span><span class="p">);</span>
<a name="line-365"></a><span class="hll">        <span class="n">TeamId</span> <span class="nf">GetControlTeamId</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_ControlTeam</span><span class="p">;</span> <span class="p">}</span><div class='verbose expandable'><span class='inconclusive2'>&lt;--- Technically the member function 'OutdoorGraveyard::GetControlTeamId' can be const. <span class='marker'>[+]</span></span><div class='content'>The member function &apos;OutdoorGraveyard::GetControlTeamId&apos; can be made a const function. Making this function &apos;const&apos; should not cause compiler errors. Even though the function can be made const function technically it may not make sense conceptually. Think about your design and the task of the function first - is it a function that must not change object internal state?</div></div><div class='verbose expandable'><span class='inconclusive2'>&lt;--- Technically the member function 'OutdoorGraveyard::GetControlTeamId' can be const. <span class='marker'>[+]</span></span><div class='content'>The member function &apos;OutdoorGraveyard::GetControlTeamId&apos; can be made a const function. Making this function &apos;const&apos; should not cause compiler errors. Even though the function can be made const function technically it may not make sense conceptually. Think about your design and the task of the function first - is it a function that must not change object internal state?</div></div>
</span><a name="line-366"></a>
<a name="line-367"></a>        <span class="c1">/// Find the nearest graveyard to a player</span>
<a name="line-368"></a>        <span class="kt">float</span> <span class="nf">GetDistance</span><span class="p">(</span><span class="n">Player</span><span class="o">*</span> <span class="n">p_Player</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<a name="line-369"></a>
<a name="line-370"></a>        <span class="c1">/// Initialize the graveyard</span>
<a name="line-371"></a>        <span class="kt">void</span> <span class="nf">Initialize</span><span class="p">(</span><span class="n">TeamId</span> <span class="n">p_Team</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">p_Graveyard</span><span class="p">);</span>
<a name="line-372"></a>
<a name="line-373"></a>        <span class="c1">/// Set spirit service for the graveyard</span>
<a name="line-374"></a>        <span class="kt">void</span> <span class="nf">SetSpirit</span><span class="p">(</span><span class="n">Creature</span><span class="o">*</span> <span class="n">p_Spirit</span><span class="p">,</span> <span class="n">TeamId</span> <span class="n">p_Team</span><span class="p">);</span>
<a name="line-375"></a>
<a name="line-376"></a>        <span class="c1">/// Add a player to the graveyard</span>
<a name="line-377"></a>        <span class="kt">void</span> <span class="nf">AddPlayer</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_Guid</span><span class="p">);</span>
<a name="line-378"></a>
<a name="line-379"></a>        <span class="c1">/// Remove a player from the graveyard</span>
<a name="line-380"></a>        <span class="kt">void</span> <span class="nf">RemovePlayer</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_Guid</span><span class="p">);</span>
<a name="line-381"></a>
<a name="line-382"></a>        <span class="c1">/// Resurrect players</span>
<a name="line-383"></a>        <span class="kt">void</span> <span class="nf">Resurrect</span><span class="p">();</span>
<a name="line-384"></a>
<a name="line-385"></a>        <span class="c1">/// Move players waiting to that graveyard on the nearest one</span>
<a name="line-386"></a>        <span class="kt">void</span> <span class="nf">RelocateDeadPlayers</span><span class="p">();</span>
<a name="line-387"></a>
<a name="line-388"></a>        <span class="c1">/// Check if this graveyard has a spirit guide</span>
<a name="line-389"></a>        <span class="kt">bool</span> <span class="nf">HasNpc</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_Guid</span><span class="p">)</span>
<a name="line-390"></a>        <span class="p">{</span>
<a name="line-391"></a>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a name="line-392"></a>                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-393"></a>
<a name="line-394"></a>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">sObjectAccessor</span><span class="o">-&gt;</span><span class="n">FindUnit</span><span class="p">(</span><span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
<a name="line-395"></a>                <span class="o">!</span><span class="n">sObjectAccessor</span><span class="o">-&gt;</span><span class="n">FindUnit</span><span class="p">(</span><span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<a name="line-396"></a>                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-397"></a>
<a name="line-398"></a>            <span class="k">return</span> <span class="p">(</span><span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">p_Guid</span> <span class="o">||</span> <span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">p_Guid</span><span class="p">);</span>
<a name="line-399"></a>        <span class="p">}</span>
<a name="line-400"></a>
<a name="line-401"></a>        <span class="c1">/// Check if a player is in this graveyard&#39;s resurrect queue</span>
<a name="line-402"></a>        <span class="kt">bool</span> <span class="nf">HasPlayer</span><span class="p">(</span><span class="n">uint64</span> <span class="n">p_Guid</span><span class="p">)</span>
<a name="line-403"></a>        <span class="p">{</span>
<a name="line-404"></a>            <span class="k">return</span> <span class="n">m_ResurrectQueue</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">p_Guid</span><span class="p">)</span> <span class="o">!=</span> <span class="n">m_ResurrectQueue</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
<a name="line-405"></a>        <span class="p">}</span>
<a name="line-406"></a>
<a name="line-407"></a>        <span class="c1">/// Get the graveyard&#39;s ID.</span>
<a name="line-408"></a><span class="hll">        <span class="n">uint32</span> <span class="nf">GetGraveyardId</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_GraveyardId</span><span class="p">;</span> <span class="p">}</span><div class='verbose expandable'><span class='inconclusive2'>&lt;--- Technically the member function 'OutdoorGraveyard::GetGraveyardId' can be const. <span class='marker'>[+]</span></span><div class='content'>The member function &apos;OutdoorGraveyard::GetGraveyardId&apos; can be made a const function. Making this function &apos;const&apos; should not cause compiler errors. Even though the function can be made const function technically it may not make sense conceptually. Think about your design and the task of the function first - is it a function that must not change object internal state?</div></div><div class='verbose expandable'><span class='inconclusive2'>&lt;--- Technically the member function 'OutdoorGraveyard::GetGraveyardId' can be const. <span class='marker'>[+]</span></span><div class='content'>The member function &apos;OutdoorGraveyard::GetGraveyardId&apos; can be made a const function. Making this function &apos;const&apos; should not cause compiler errors. Even though the function can be made const function technically it may not make sense conceptually. Think about your design and the task of the function first - is it a function that must not change object internal state?</div></div>
</span><a name="line-409"></a>
<a name="line-410"></a>    <span class="nl">protected</span><span class="p">:</span>
<a name="line-411"></a>        <span class="n">TeamId</span> <span class="n">m_ControlTeam</span><span class="p">;</span>
<a name="line-412"></a>        <span class="n">uint32</span> <span class="n">m_GraveyardId</span><span class="p">;</span>
<a name="line-413"></a>        <span class="n">uint64</span> <span class="n">m_SpiritGuide</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-414"></a>        <span class="n">GuidSet</span> <span class="n">m_ResurrectQueue</span><span class="p">;</span>
<a name="line-415"></a>        <span class="n">OutdoorPvP</span><span class="o">*</span> <span class="n">m_OutdoorPvP</span><span class="p">;</span>
<a name="line-416"></a><span class="p">};</span>
<a name="line-417"></a>
<a name="line-418"></a><span class="cp">#endif </span><span class="cm">/*OUTDOOR_PVP_H_*/</span><span class="cp"></span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.73 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.sourceforge.net">http://cppcheck.sourceforge.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
