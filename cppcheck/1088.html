
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [project name]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [project name]: /Users/MilleniumStudio/Git/wod/src/server/shared/Common.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> Common.h</p>
<a href='1088.html#line-217'> noExplicitConstructor 217</a><a href='1088.html#line-217'> noExplicitConstructor 217</a><a href='1088.html#line-217'> noExplicitConstructor 217</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-2"></a><span class="c1">//</span>
<a name="line-3"></a><span class="c1">//  MILLENIUM-STUDIO</span>
<a name="line-4"></a><span class="c1">//  Copyright 2016 Millenium-studio SARL</span>
<a name="line-5"></a><span class="c1">//  All Rights Reserved.</span>
<a name="line-6"></a><span class="c1">//</span>
<a name="line-7"></a><span class="c1">////////////////////////////////////////////////////////////////////////////////</span>
<a name="line-8"></a>
<a name="line-9"></a><span class="cp">#ifndef COMMON_H</span>
<a name="line-10"></a><span class="cp">#define COMMON_H</span>
<a name="line-11"></a>
<a name="line-12"></a><span class="c1">// config.h needs to be included 1st</span>
<a name="line-13"></a><span class="c1">// TODO this thingy looks like hack, but its not, need to</span>
<a name="line-14"></a><span class="c1">// make separate header however, because It makes mess here.</span>
<a name="line-15"></a><span class="cp">#ifdef HAVE_CONFIG_H</span>
<a name="line-16"></a><span class="c1">// Remove Some things that we will define</span>
<a name="line-17"></a><span class="c1">// This is in case including another config.h</span>
<a name="line-18"></a><span class="c1">// before trinity config.h</span>
<a name="line-19"></a><span class="cp">#ifdef PACKAGE</span>
<a name="line-20"></a><span class="cp">#undef PACKAGE</span>
<a name="line-21"></a><span class="cp">#endif </span><span class="c1">//PACKAGE</span>
<a name="line-22"></a><span class="cp">#ifdef PACKAGE_BUGREPORT</span>
<a name="line-23"></a><span class="cp">#undef PACKAGE_BUGREPORT</span>
<a name="line-24"></a><span class="cp">#endif </span><span class="c1">//PACKAGE_BUGREPORT</span>
<a name="line-25"></a><span class="cp">#ifdef PACKAGE_NAME</span>
<a name="line-26"></a><span class="cp">#undef PACKAGE_NAME</span>
<a name="line-27"></a><span class="cp">#endif </span><span class="c1">//PACKAGE_NAME</span>
<a name="line-28"></a><span class="cp">#ifdef PACKAGE_STRING</span>
<a name="line-29"></a><span class="cp">#undef PACKAGE_STRING</span>
<a name="line-30"></a><span class="cp">#endif </span><span class="c1">//PACKAGE_STRING</span>
<a name="line-31"></a><span class="cp">#ifdef PACKAGE_TARNAME</span>
<a name="line-32"></a><span class="cp">#undef PACKAGE_TARNAME</span>
<a name="line-33"></a><span class="cp">#endif </span><span class="c1">//PACKAGE_TARNAME</span>
<a name="line-34"></a><span class="cp">#ifdef PACKAGE_VERSION</span>
<a name="line-35"></a><span class="cp">#undef PACKAGE_VERSION</span>
<a name="line-36"></a><span class="cp">#endif </span><span class="c1">//PACKAGE_VERSION</span>
<a name="line-37"></a><span class="cp">#ifdef VERSION</span>
<a name="line-38"></a><span class="cp">#undef VERSION</span>
<a name="line-39"></a><span class="cp">#endif </span><span class="c1">//VERSION</span>
<a name="line-40"></a>
<a name="line-41"></a><span class="cp"># include &quot;Config.h&quot;</span>
<a name="line-42"></a>
<a name="line-43"></a><span class="cp">#undef PACKAGE</span>
<a name="line-44"></a><span class="cp">#undef PACKAGE_BUGREPORT</span>
<a name="line-45"></a><span class="cp">#undef PACKAGE_NAME</span>
<a name="line-46"></a><span class="cp">#undef PACKAGE_STRING</span>
<a name="line-47"></a><span class="cp">#undef PACKAGE_TARNAME</span>
<a name="line-48"></a><span class="cp">#undef PACKAGE_VERSION</span>
<a name="line-49"></a><span class="cp">#undef VERSION</span>
<a name="line-50"></a><span class="cp">#endif </span><span class="c1">//HAVE_CONFIG_H</span>
<a name="line-51"></a>
<a name="line-52"></a><span class="cp">#include</span> <span class="cpf">&quot;Define.h&quot;</span><span class="cp"></span>
<a name="line-53"></a>
<a name="line-54"></a><span class="cp">#include</span> <span class="cpf">&lt;LockedMap.h&gt;</span><span class="cp"></span>
<a name="line-55"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="cp"></span>
<a name="line-56"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_set&gt;</span><span class="cp"></span>
<a name="line-57"></a><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a name="line-58"></a><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<a name="line-59"></a><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<a name="line-60"></a><span class="cp">#include</span> <span class="cpf">&lt;stdexcept&gt;</span><span class="cp"></span>
<a name="line-61"></a><span class="cp">#include</span> <span class="cpf">&lt;time.h&gt;</span><span class="cp"></span>
<a name="line-62"></a><span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>
<a name="line-63"></a><span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>
<a name="line-64"></a><span class="cp">#include</span> <span class="cpf">&lt;errno.h&gt;</span><span class="cp"></span>
<a name="line-65"></a><span class="cp">#include</span> <span class="cpf">&lt;signal.h&gt;</span><span class="cp"></span>
<a name="line-66"></a><span class="cp">#include</span> <span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<a name="line-67"></a><span class="cp">#include</span> <span class="cpf">&lt;random&gt;</span><span class="cp"></span>
<a name="line-68"></a><span class="cp">#include</span> <span class="cpf">&lt;limits&gt;</span><span class="cp"></span>
<a name="line-69"></a>
<a name="line-70"></a><span class="cp">#if PLATFORM == PLATFORM_WINDOWS</span>
<a name="line-71"></a><span class="cp">#define STRCASECMP stricmp</span>
<a name="line-72"></a><span class="cp">#else</span>
<a name="line-73"></a><span class="cp">#define STRCASECMP strcasecmp</span>
<a name="line-74"></a><span class="cp">#endif</span>
<a name="line-75"></a>
<a name="line-76"></a><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"></span>
<a name="line-77"></a><span class="cp">#include</span> <span class="cpf">&lt;list&gt;</span><span class="cp"></span>
<a name="line-78"></a><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<a name="line-79"></a><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp"></span>
<a name="line-80"></a><span class="cp">#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp"></span>
<a name="line-81"></a><span class="cp">#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp"></span>
<a name="line-82"></a><span class="cp">#include</span> <span class="cpf">&lt;forward_list&gt;</span><span class="cp"></span>
<a name="line-83"></a>
<a name="line-84"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;     ///&lt; std::cout</span><span class="cp"></span>
<a name="line-85"></a><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;   ///&lt; std::less</span><span class="cp"></span>
<a name="line-86"></a><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;    ///&lt; std::sort, std::includes</span><span class="cp"></span>
<a name="line-87"></a>
<a name="line-88"></a><span class="cp">#include</span> <span class="cpf">&lt;atomic&gt;</span><span class="cp"></span>
<a name="line-89"></a><span class="cp">#include</span> <span class="cpf">&lt;mutex&gt;</span><span class="cp"></span>
<a name="line-90"></a><span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp"></span>
<a name="line-91"></a><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"></span>
<a name="line-92"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="line-93"></a><span class="cp">#include</span> <span class="cpf">&quot;Threading/LockedQueue.h&quot;</span><span class="cp"></span>
<a name="line-94"></a><span class="cp">#include</span> <span class="cpf">&quot;Threading/Threading.h&quot;</span><span class="cp"></span>
<a name="line-95"></a>
<a name="line-96"></a><span class="cp">#include</span> <span class="cpf">&lt;ace/Basic_Types.h&gt;</span><span class="cp"></span>
<a name="line-97"></a><span class="cp">#include</span> <span class="cpf">&lt;ace/Guard_T.h&gt;</span><span class="cp"></span>
<a name="line-98"></a><span class="cp">#include</span> <span class="cpf">&lt;ace/RW_Thread_Mutex.h&gt;</span><span class="cp"></span>
<a name="line-99"></a><span class="cp">#include</span> <span class="cpf">&lt;ace/Thread_Mutex.h&gt;</span><span class="cp"></span>
<a name="line-100"></a><span class="cp">#include</span> <span class="cpf">&lt;ace/Singleton.h&gt;</span><span class="cp"></span>
<a name="line-101"></a>
<a name="line-102"></a><span class="c1">/// MSVC 18 (2013) have only partial support of thread_local (c++11)</span>
<a name="line-103"></a><span class="cp">#ifdef __GNUC__</span>
<a name="line-104"></a><span class="cp"># define thread_local __thread</span>
<a name="line-105"></a><span class="cp">#elif __STDC_VERSION__ &gt;= 201112L</span>
<a name="line-106"></a><span class="cp"># define thread_local _Thread_local</span>
<a name="line-107"></a><span class="cp">#elif defined(_MSC_VER)</span>
<a name="line-108"></a><span class="cp"># define thread_local __declspec(thread)</span>
<a name="line-109"></a><span class="cp">#endif</span>
<a name="line-110"></a>
<a name="line-111"></a><span class="cp">#if PLATFORM == PLATFORM_WINDOWS</span>
<a name="line-112"></a><span class="cp">#  include &lt;ace/config-all.h&gt;</span>
<a name="line-113"></a><span class="c1">// XP winver - needed to compile with standard leak check in MemoryLeaks.h</span>
<a name="line-114"></a><span class="c1">// uncomment later if needed</span>
<a name="line-115"></a><span class="c1">//#define _WIN32_WINNT 0x0501</span>
<a name="line-116"></a><span class="cp">#  include &lt;ws2tcpip.h&gt;</span>
<a name="line-117"></a><span class="c1">//#undef WIN32_WINNT</span>
<a name="line-118"></a><span class="cp">#else</span>
<a name="line-119"></a><span class="cp">#  include &lt;sys/types.h&gt;</span>
<a name="line-120"></a><span class="cp">#  include &lt;sys/ioctl.h&gt;</span>
<a name="line-121"></a><span class="cp">#  include &lt;sys/socket.h&gt;</span>
<a name="line-122"></a><span class="cp">#  include &lt;netinet/in.h&gt;</span>
<a name="line-123"></a><span class="cp">#  include &lt;unistd.h&gt;</span>
<a name="line-124"></a><span class="cp">#  include &lt;netdb.h&gt;</span>
<a name="line-125"></a><span class="cp">#endif</span>
<a name="line-126"></a>
<a name="line-127"></a><span class="cp">#if COMPILER == COMPILER_MICROSOFT</span>
<a name="line-128"></a>
<a name="line-129"></a><span class="cp">#include</span> <span class="cpf">&lt;float.h&gt;</span><span class="cp"></span>
<a name="line-130"></a>
<a name="line-131"></a><span class="cp">#define I32FMT &quot;%08I32X&quot;</span>
<a name="line-132"></a><span class="cp">#define I64FMT &quot;%016I64X&quot;</span>
<a name="line-133"></a><span class="cp">#define snprintf _snprintf</span>
<a name="line-134"></a><span class="cp">#define atoll _atoi64</span>
<a name="line-135"></a><span class="cp">#define vsnprintf _vsnprintf</span>
<a name="line-136"></a><span class="cp">#define llabs _abs64</span>
<a name="line-137"></a>
<a name="line-138"></a><span class="cp">#else</span>
<a name="line-139"></a>
<a name="line-140"></a><span class="cp">#define stricmp strcasecmp</span>
<a name="line-141"></a><span class="cp">#define strnicmp strncasecmp</span>
<a name="line-142"></a><span class="cp">#define I32FMT &quot;%08X&quot;</span>
<a name="line-143"></a><span class="cp">#define I64FMT &quot;%016llX&quot;</span>
<a name="line-144"></a>
<a name="line-145"></a><span class="cp">#endif</span>
<a name="line-146"></a>
<a name="line-147"></a><span class="kr">inline</span> <span class="kt">float</span> <span class="nf">finiteAlways</span><span class="p">(</span><span class="kt">float</span> <span class="n">f</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">isfinite</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">?</span> <span class="nl">f</span> <span class="p">:</span> <span class="mf">0.0f</span><span class="p">;</span> <span class="p">}</span>
<a name="line-148"></a>
<a name="line-149"></a><span class="cp">#define atol(a) strtoul( a, NULL, 10)</span>
<a name="line-150"></a>
<a name="line-151"></a><span class="cp">#define STRINGIZE(a) #a</span>
<a name="line-152"></a>
<a name="line-153"></a><span class="k">enum</span> <span class="n">TimeConstants</span>
<a name="line-154"></a><span class="p">{</span>
<a name="line-155"></a>    <span class="n">MINUTE</span>          <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
<a name="line-156"></a>    <span class="n">HOUR</span>            <span class="o">=</span> <span class="n">MINUTE</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span>
<a name="line-157"></a>    <span class="n">DAY</span>             <span class="o">=</span> <span class="n">HOUR</span><span class="o">*</span><span class="mi">24</span><span class="p">,</span>
<a name="line-158"></a>    <span class="n">WEEK</span>            <span class="o">=</span> <span class="n">DAY</span><span class="o">*</span><span class="mi">7</span><span class="p">,</span>
<a name="line-159"></a>    <span class="n">MONTH</span>           <span class="o">=</span> <span class="n">DAY</span><span class="o">*</span><span class="mi">30</span><span class="p">,</span>
<a name="line-160"></a>    <span class="n">YEAR</span>            <span class="o">=</span> <span class="n">MONTH</span><span class="o">*</span><span class="mi">12</span><span class="p">,</span>
<a name="line-161"></a>    <span class="n">IN_MILLISECONDS</span> <span class="o">=</span> <span class="mi">1000</span>
<a name="line-162"></a><span class="p">};</span>
<a name="line-163"></a>
<a name="line-164"></a><span class="k">enum</span> <span class="n">AccountTypes</span>
<a name="line-165"></a><span class="p">{</span>
<a name="line-166"></a>    <span class="n">SEC_PLAYER</span>                <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a name="line-167"></a>    <span class="n">SEC_MODERATOR</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<a name="line-168"></a>    <span class="n">SEC_GAMEMASTER</span>            <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a name="line-169"></a>    <span class="n">SEC_CONFIRMED_GAMEMASTER</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<a name="line-170"></a>    <span class="n">SEC_REALM_LEADER</span>          <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<a name="line-171"></a>    <span class="n">SEC_GM_LEADER</span>             <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<a name="line-172"></a>    <span class="n">SEC_ADMINISTRATOR</span>         <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<a name="line-173"></a>    <span class="n">SEC_CONSOLE</span>               <span class="o">=</span> <span class="mi">7</span>                                  <span class="c1">// must be always last in list, accounts must have less security level always also</span>
<a name="line-174"></a><span class="p">};</span>
<a name="line-175"></a>
<a name="line-176"></a><span class="k">enum</span> <span class="n">LocaleConstant</span>
<a name="line-177"></a><span class="p">{</span>
<a name="line-178"></a>    <span class="n">LOCALE_enUS</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">,</span>
<a name="line-179"></a>    <span class="n">LOCALE_koKR</span> <span class="o">=</span>  <span class="mi">1</span><span class="p">,</span>
<a name="line-180"></a>    <span class="n">LOCALE_frFR</span> <span class="o">=</span>  <span class="mi">2</span><span class="p">,</span>
<a name="line-181"></a>    <span class="n">LOCALE_deDE</span> <span class="o">=</span>  <span class="mi">3</span><span class="p">,</span>
<a name="line-182"></a>    <span class="n">LOCALE_zhCN</span> <span class="o">=</span>  <span class="mi">4</span><span class="p">,</span>
<a name="line-183"></a>    <span class="n">LOCALE_zhTW</span> <span class="o">=</span>  <span class="mi">5</span><span class="p">,</span>
<a name="line-184"></a>    <span class="n">LOCALE_esES</span> <span class="o">=</span>  <span class="mi">6</span><span class="p">,</span>
<a name="line-185"></a>    <span class="n">LOCALE_esMX</span> <span class="o">=</span>  <span class="mi">7</span><span class="p">,</span>
<a name="line-186"></a>    <span class="n">LOCALE_ruRU</span> <span class="o">=</span>  <span class="mi">8</span><span class="p">,</span>
<a name="line-187"></a>    <span class="n">LOCALE_ptPT</span> <span class="o">=</span>  <span class="mi">9</span><span class="p">,</span>
<a name="line-188"></a>    <span class="n">LOCALE_itIT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<a name="line-189"></a><span class="p">};</span>
<a name="line-190"></a>
<a name="line-191"></a><span class="k">const</span> <span class="n">uint8</span> <span class="n">TOTAL_LOCALES</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
<a name="line-192"></a><span class="k">const</span> <span class="n">LocaleConstant</span> <span class="n">DEFAULT_LOCALE</span> <span class="o">=</span> <span class="n">LOCALE_enUS</span><span class="p">;</span>
<a name="line-193"></a>
<a name="line-194"></a><span class="cp">#define MAX_LOCALES TOTAL_LOCALES</span>
<a name="line-195"></a><span class="cp">#define MAX_ACCOUNT_TUTORIAL_VALUES 8</span>
<a name="line-196"></a>
<a name="line-197"></a><span class="k">extern</span> <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">localeNames</span><span class="p">[</span><span class="n">TOTAL_LOCALES</span><span class="p">];</span>
<a name="line-198"></a>
<a name="line-199"></a><span class="n">LocaleConstant</span> <span class="nf">GetLocaleByName</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">);</span>
<a name="line-200"></a>
<a name="line-201"></a><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">StringVector</span><span class="p">;</span>
<a name="line-202"></a>
<a name="line-203"></a><span class="cp">#pragma pack(push, 1)</span>
<a name="line-204"></a>
<a name="line-205"></a><span class="k">static</span> <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">g_EmptyStr</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
<a name="line-206"></a>
<a name="line-207"></a><span class="k">struct</span> <span class="n">LocalizedString</span>
<a name="line-208"></a><span class="p">{</span>
<a name="line-209"></a>    <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">Str</span><span class="p">[</span><span class="n">TOTAL_LOCALES</span><span class="p">];</span>
<a name="line-210"></a>
<a name="line-211"></a>    <span class="n">LocalizedString</span><span class="p">()</span>
<a name="line-212"></a>    <span class="p">{</span>
<a name="line-213"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">uint32</span> <span class="n">l_I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">l_I</span> <span class="o">&lt;</span> <span class="n">TOTAL_LOCALES</span><span class="p">;</span> <span class="n">l_I</span><span class="o">++</span><span class="p">)</span>
<a name="line-214"></a>            <span class="n">Str</span><span class="p">[</span><span class="n">l_I</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
<a name="line-215"></a>    <span class="p">}</span>
<a name="line-216"></a>
<a name="line-217"></a><span class="hll">    <span class="n">LocalizedString</span><span class="p">(</span><span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">p_DefaultValue</span><span class="p">)</span><div class='verbose expandable'><span class='error2'>&lt;--- Struct 'LocalizedString' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Struct &apos;LocalizedString&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div><div class='verbose expandable'><span class='error2'>&lt;--- Struct 'LocalizedString' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Struct &apos;LocalizedString&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div><div class='verbose expandable'><span class='error2'>&lt;--- Struct 'LocalizedString' has a constructor with 1 argument that is not explicit. <span class='marker'>[+]</span></span><div class='content'>Struct &apos;LocalizedString&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div>
</span><a name="line-218"></a>    <span class="p">{</span>
<a name="line-219"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">uint32</span> <span class="n">l_I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">l_I</span> <span class="o">&lt;</span> <span class="n">TOTAL_LOCALES</span><span class="p">;</span> <span class="n">l_I</span><span class="o">++</span><span class="p">)</span>
<a name="line-220"></a>            <span class="n">Str</span><span class="p">[</span><span class="n">l_I</span><span class="p">]</span> <span class="o">=</span> <span class="n">p_DefaultValue</span><span class="p">;</span>
<a name="line-221"></a>    <span class="p">}</span>
<a name="line-222"></a>
<a name="line-223"></a>    <span class="kr">inline</span> <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">Get</span><span class="p">(</span><span class="n">uint32</span> <span class="n">p_Locale</span><span class="p">)</span> <span class="k">const</span>
<a name="line-224"></a>    <span class="p">{</span>
<a name="line-225"></a>        <span class="k">if</span> <span class="p">((</span><span class="n">Str</span><span class="p">[</span><span class="n">p_Locale</span><span class="p">]</span> <span class="o">==</span> <span class="n">nullptr</span> <span class="o">||</span> <span class="n">strlen</span><span class="p">(</span><span class="n">Str</span><span class="p">[</span><span class="n">p_Locale</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">Str</span><span class="p">[</span><span class="n">LOCALE_enUS</span><span class="p">]</span> <span class="o">!=</span> <span class="n">nullptr</span><span class="p">)</span>
<a name="line-226"></a>            <span class="k">return</span> <span class="n">Str</span><span class="p">[</span><span class="n">LOCALE_enUS</span><span class="p">];</span>
<a name="line-227"></a>
<a name="line-228"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">Str</span><span class="p">[</span><span class="n">p_Locale</span><span class="p">]</span> <span class="o">==</span> <span class="n">nullptr</span><span class="p">)</span>
<a name="line-229"></a>            <span class="k">return</span> <span class="n">g_EmptyStr</span><span class="p">;</span>
<a name="line-230"></a>
<a name="line-231"></a>        <span class="k">return</span> <span class="n">Str</span><span class="p">[</span><span class="n">p_Locale</span><span class="p">];</span>
<a name="line-232"></a>    <span class="p">}</span>
<a name="line-233"></a><span class="p">};</span>
<a name="line-234"></a>
<a name="line-235"></a><span class="cp">#pragma pack(pop)</span>
<a name="line-236"></a>
<a name="line-237"></a><span class="k">enum</span> <span class="n">GM_COMMAND_TAB</span>
<a name="line-238"></a><span class="p">{</span>
<a name="line-239"></a>    <span class="n">GM</span><span class="p">,</span>
<a name="line-240"></a>    <span class="n">PLAYER</span>
<a name="line-241"></a><span class="p">};</span>
<a name="line-242"></a>
<a name="line-243"></a><span class="k">struct</span> <span class="n">GmCommand</span>
<a name="line-244"></a><span class="p">{</span>
<a name="line-245"></a>    <span class="n">uint32</span> <span class="n">accountID</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-246"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">accountName</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-247"></a>    <span class="n">uint32</span> <span class="n">characterID</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-248"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">characterName</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-249"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">command</span><span class="p">;</span>
<a name="line-250"></a><span class="p">};</span>
<a name="line-251"></a>
<a name="line-252"></a><span class="k">struct</span> <span class="n">GmChat</span>
<a name="line-253"></a><span class="p">{</span>
<a name="line-254"></a>    <span class="n">uint32</span> <span class="n">type</span><span class="p">;</span>
<a name="line-255"></a>    <span class="n">uint32</span> <span class="n">accountID</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-256"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">accountName</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-257"></a>    <span class="n">uint32</span> <span class="n">characterID</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-258"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">characterName</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-259"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">message</span><span class="p">;</span>
<a name="line-260"></a><span class="p">};</span>
<a name="line-261"></a>
<a name="line-262"></a><span class="k">struct</span> <span class="n">ArenaLog</span>
<a name="line-263"></a><span class="p">{</span>
<a name="line-264"></a>    <span class="n">uint32</span> <span class="n">timestamp</span><span class="p">;</span>
<a name="line-265"></a>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">str</span><span class="p">;</span>
<a name="line-266"></a><span class="p">};</span>
<a name="line-267"></a>
<a name="line-268"></a><span class="k">extern</span> <span class="n">ACE_Based</span><span class="o">::</span><span class="n">LockedQueue</span><span class="o">&lt;</span><span class="n">GmCommand</span><span class="o">*</span><span class="p">,</span> <span class="n">ACE_Thread_Mutex</span><span class="o">&gt;</span> <span class="n">GmLogQueue</span><span class="p">;</span>
<a name="line-269"></a><span class="k">extern</span> <span class="n">ACE_Based</span><span class="o">::</span><span class="n">LockedQueue</span><span class="o">&lt;</span><span class="n">GmChat</span><span class="o">*</span><span class="p">,</span>    <span class="n">ACE_Thread_Mutex</span><span class="o">&gt;</span> <span class="n">GmChatLogQueue</span><span class="p">;</span>
<a name="line-270"></a><span class="k">extern</span> <span class="n">ACE_Based</span><span class="o">::</span><span class="n">LockedQueue</span><span class="o">&lt;</span><span class="n">ArenaLog</span><span class="o">*</span><span class="p">,</span>  <span class="n">ACE_Thread_Mutex</span><span class="o">&gt;</span> <span class="n">ArenaLogQueue</span><span class="p">;</span>
<a name="line-271"></a>
<a name="line-272"></a><span class="c1">// we always use stdlibc++ std::max/std::min, undefine some not C++ standard defines (Win API and some other platforms)</span>
<a name="line-273"></a><span class="cp">#ifdef max</span>
<a name="line-274"></a><span class="cp">#undef max</span>
<a name="line-275"></a><span class="cp">#endif</span>
<a name="line-276"></a>
<a name="line-277"></a><span class="cp">#ifdef min</span>
<a name="line-278"></a><span class="cp">#undef min</span>
<a name="line-279"></a><span class="cp">#endif</span>
<a name="line-280"></a>
<a name="line-281"></a><span class="cp">#ifndef M_PI</span>
<a name="line-282"></a><span class="cp">#define M_PI            3.14159265358979323846f</span>
<a name="line-283"></a><span class="cp">#endif</span>
<a name="line-284"></a>
<a name="line-285"></a><span class="cp">#define MAX_QUERY_LEN 32*1024</span>
<a name="line-286"></a>
<a name="line-287"></a><span class="cp">#define TRINITY_GUARD(MUTEX, LOCK) \</span>
<a name="line-288"></a><span class="cp">  ACE_Guard&lt; MUTEX &gt; TRINITY_GUARD_OBJECT (LOCK); \</span>
<a name="line-289"></a><span class="cp">    if (TRINITY_GUARD_OBJECT.locked() == 0) ASSERT(false);</span>
<a name="line-290"></a>
<a name="line-291"></a><span class="c1">//! For proper implementation of multiple-read, single-write pattern, use</span>
<a name="line-292"></a><span class="c1">//! ACE_RW_Mutex as underlying @MUTEX</span>
<a name="line-293"></a><span class="cp"># define TRINITY_WRITE_GUARD(MUTEX, LOCK) \</span>
<a name="line-294"></a><span class="cp">  ACE_Write_Guard&lt; MUTEX &gt; TRINITY_GUARD_OBJECT (LOCK); \</span>
<a name="line-295"></a><span class="cp">    if (TRINITY_GUARD_OBJECT.locked() == 0) ASSERT(false);</span>
<a name="line-296"></a>
<a name="line-297"></a><span class="c1">//! For proper implementation of multiple-read, single-write pattern, use</span>
<a name="line-298"></a><span class="c1">//! ACE_RW_Mutex as underlying @MUTEX</span>
<a name="line-299"></a><span class="cp"># define TRINITY_READ_GUARD(MUTEX, LOCK) \</span>
<a name="line-300"></a><span class="cp">  ACE_Read_Guard&lt; MUTEX &gt; TRINITY_GUARD_OBJECT (LOCK); \</span>
<a name="line-301"></a><span class="cp">    if (TRINITY_GUARD_OBJECT.locked() == 0) ASSERT(false);</span>
<a name="line-302"></a>
<a name="line-303"></a><span class="n">namespace</span> <span class="n">std</span>
<a name="line-304"></a><span class="p">{</span>
<a name="line-305"></a>    <span class="n">template</span><span class="o">&lt;</span><span class="n">class</span> <span class="n">K</span><span class="p">,</span> <span class="n">class</span> <span class="n">V</span><span class="o">&gt;</span>
<a name="line-306"></a>    <span class="k">struct</span> <span class="n">hash</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;&gt;</span>
<a name="line-307"></a>    <span class="p">{</span>
<a name="line-308"></a>    <span class="nl">public</span><span class="p">:</span>
<a name="line-309"></a>        <span class="kt">size_t</span> <span class="n">operator</span><span class="p">()(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="k">const</span>
<a name="line-310"></a>        <span class="p">{</span>
<a name="line-311"></a>            <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">K</span><span class="o">&gt;</span><span class="p">()(</span><span class="n">key</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">^</span> <span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">V</span><span class="o">&gt;</span><span class="p">()(</span><span class="n">key</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
<a name="line-312"></a>        <span class="p">}</span>
<a name="line-313"></a>    <span class="p">};</span>
<a name="line-314"></a><span class="p">}</span>
<a name="line-315"></a>
<a name="line-316"></a><span class="cp">#endif</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.73 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.sourceforge.net">http://cppcheck.sourceforge.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
